<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <title>眼睛-商品管理-商品列表</title>
    <!--Bootstrap样式引入开始-->
    <link rel="stylesheet" href="../resource/css/bootstrap.min.css">
    <link href="../resource/js/plugins/bootstarp-table/css/bootstrap-table.min.css" rel="stylesheet">
    <link href="../resource/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
    <link href="../resource/layui/css/layui.css" rel="stylesheet">
    <!--字体样式文件引用开始-->
    <link rel="stylesheet" href="../resource/fonts/iconfont.css">
    <!--字体样式文件引用结束-->
    <!--标签样式重置开始-->
    <link rel="stylesheet" href="../resource/css/reset.css">
    <link rel="stylesheet" href="../resource/css/style.css">
    <link rel="stylesheet" href="../resource/css/common.css">
    <!--标签样式重置结束-->
    <!--本页面样式开始-->
    <link rel="stylesheet" href="../resource/css/yanjing/goodsManage.css">
    <!--本页面样式结束-->
    <style>
        body{
            background-color: #ECECF3;
        }
    </style>
</head>
<body>
    <div class="yj-header">
        <ul class="tab-ul" id="categoryDom">
            <!--<li onclick="chooseGoodsType(this,1)" class="active">镜片</li>
            <li onclick="chooseGoodsType(this,2)">镜架</li>
            <li onclick="chooseGoodsType(this,3)">隐形眼镜</li>
            <li onclick="chooseGoodsType(this,4)">太阳镜</li>
            <li onclick="chooseGoodsType(this,5)">护理产品</li>
            <li onclick="chooseGoodsType(this,6)">其它商品</li>
            <li onclick="chooseGoodsType(this,7)">特殊商品</li>-->
        </ul>
        <div class="yj-header-right">
            <button class="btn btn-info" onclick="suppliers()">设置供应商</button>
            <!--<div class="selectBox" id="selectBox">
                <div class="select-box-header">
                    <span class="text">系列</span> <i class="iconfont icon-ico_arrow_down" ></i>
                </div>

                <div class="optionBox">
                    <ul class="optionUL">
                        <li value="01">系列1</li>
                        <li value="02">系列2</li>
                        <li value="03">系列3</li>
                        <li value="04">系列4</li>
                        <li value="05">系列5</li>
                    </ul>
                </div>
            </div>-->
            <input type="text" placeholder="搜索商品" class="yj-input">
            <button class="btn btn-primary" onclick="addGoods()">新增商品</button>
        </div>
    </div>
    <div class="goods-header">
        <div class="selectBox" id="select-form">

        </div>
        <div class="selectBox" id="select-type">

        </div>
        <div class="selectBox" id="select-series">

        </div>
        <div class="selectBox" id="select-status">
            <div class="select-box-header">
                <span class="text">全部销售状态</span> <i class="iconfont icon-ico_arrow_down" ></i>
            </div>
            <div class="optionBox">
                <ul class="optionUL">
                    <li value="0">已销售</li>
                    <li value="1">未销售</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="goods-body">
        <table id="yj-table" data-toggle="table"  class="table table-border"></table>
    </div>
    <!--新增镜片-->
    <div class="content-view content-view-addgoods">
        <div class="layui-yj-header">
            <div class="layui-layer-title">
                <div>新增镜片</div>
            </div>
            <div class="title-right" >
                销售状态<div class="yj-search active" id="yj-status-jp" onclick="changeYjStatus(this)"><i></i></div>
            </div>
        </div>

        <div class="goods-select-box">
            <div class="goods-select">
                <div class="goods-select-title">品牌</div>
                <div class="selectBox" id="select-jp-brand">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">系列</div>
                <div class="selectBox" id="select-jp-series">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">焦点</div>
                <div class="selectBox" id="select-jp-jiaodian">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">折射率</div>
                <div class="selectBox" id="select-jp-zheshelv">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">功能</div>
                <div class="selectBox" id="select-jp-gongneng">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">供应商</div>
                <div class="selectBox" id="select-jp-provider">

                </div>
            </div>
            <!--<div class="goods-select goods-range">
                <div class="goods-select-title">现货范围</div>
                <div class="goods-range-body" onclick="openGoodsRange('现货')">设定现货范围</div>
            </div>-->
            <div class="goods-select goods-range">
                <div class="goods-select-title">定制范围</div>
                <div class="goods-range-body" onclick="openGoodsRange('定制')">设定定制范围</div>
            </div>
            <div style="clear: both"></div>
        </div>
        <form class="layui-form" action="">
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" lay-filter="defaultGoods"  name="type" value="0" lay-skin="primary" title="常规商品" checked >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-jp">
                <div class="goods-vip-btn">
                    <div class="goods-vip-left">会员折扣</div>
                    <div class="goods-vip-right" onclick="changeVipStatus(this)">
                        <div class="yj-radio"></div>
                        <span>参与会员折扣</span>
                        <em onclick="openSettingVip(this)">设置</em>
                    </div>
                </div>
                <div class="goods-select-box">
                    <div class="goods-select goods-range">
                        <div class="goods-select-title">零售价</div>
                        <div class="goods-range-body" onclick="openZeroPrice()">设定零售价</div>
                    </div>
                    <div class="goods-select goods-range">
                        <div class="goods-select-title">提成</div>
                        <div class="goods-range-body" onclick="openSettingTicheng()">设定提成</div>
                    </div>
                    <div style="clear: both"></div>
                </div>
            </div>
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" name="type" value="1" lay-filter="scoreGoods" lay-skin="primary" title="积分商品" >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-jp goods-select-box" style="display: none">
                <div class="goods-select goods-range">
                    <div class="goods-select-title">积分价</div>
                    <div class="goods-range-body" onclick="openZeroPrice(1)">设定积分价</div>
                </div>
                <div class="goods-select goods-range">
                    <div class="goods-select-title">兑换数量上限</div>
                    <div class="">
                        <input type="text" placeholder="搜索商品" id="select-jp-maxnum" class="yj-input">
                    </div>
                </div>
                <div class="goods-select " style="width: 100%;height: auto;">
                    <div class="goods-select-title">有效期</div>
                    <div class="yj-demo-time" id="yj-time-jp">
                        <div class="yj-date">
                            <span>开始时间-结束时间</span><i class="iconfont icon-ico_calendar"></i>
                        </div>
                    </div>
                </div>
                <div class="goods-select goods-youxiaoqi" style="width: 100%;height: auto;">
                    <form class="layui-form" action="">
                        <div class="layui-form-item" pane="">
                            <div class="layui-input-block yj-check-input">
                                <input type="checkbox" name=""  lay-filter="kucun-jp" lay-skin="primary" title="当库存低于<input readonly='' class='yj-input' placeholder='数量'>触发警报" >
                            </div>
                        </div>
                    </form>
                </div>
                <div style="clear: both"></div>

            </div>
        </form>
    </div>
    <!--新增特殊商品-->
    <div class="content-view content-view-addtsgoods">
        <div class="layui-yj-header">
            <div class="layui-layer-title">
                <div>新增特殊商品</div>
            </div>
            <div class="title-right" >
                销售状态<div class="yj-search active" id="yj-status-tssp"  onclick="changeYjStatus(this)"><i></i></div>
            </div>
        </div>

        <div class="goods-select-box">
            <div class="goods-select goods-select-img" style="width: 100%">
                <div class="goods-select-title">商品主图</div>
                <div class="selectBox"  onclick="uploadTsspIcon()">
                    <div>
                        <img src="" id="cover" alt="">
                    </div>
                    <i class="iconfont icon-ico_plus"></i>
                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">名称</div>
                <div class="selectBox" >
                    <input type="text" class="yj-input" id="select-tssp-name">
                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">产品编码</div>
                <div class="selectBox" >
                    <input type="text" class="yj-input" placeholder="产品编码" id="select-tssp-code">
                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">库存</div>
                <div class="selectBox" >
                    <input type="text" class="yj-input" placeholder="库存" id="select-tssp-num">
                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">成本价</div>
                <div class="selectBox" >
                    <input type="text" class="yj-input" placeholder="成本价"  id="select-tssp-costPrice">
                </div>
            </div>
            <div style="clear: both"></div>
        </div>
        <form class="layui-form" action="">
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" lay-filter="defaultGoods"  name="type" value="0" lay-skin="primary" title="常规商品" checked >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-tssp"></div>
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" name="type" value="1" lay-filter="scoreGoods" lay-skin="primary" title="积分商品" >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-tssp goods-select-box" style="display: none">
                <div class="goods-select">
                    <div class="goods-select-title">积分价</div>
                    <div class="selectBox" >
                        <input type="text" class="yj-input" placeholder="积分价"  id="select-tssp-jifen">
                    </div>
                </div>
                <div class="goods-select">
                    <div class="goods-select-title">兑换数量上限</div>
                    <div class="">
                        <input type="text" placeholder="数量" id="select-tssp-maxnum" class="yj-input">
                    </div>
                </div>
                <div class="goods-select " style="width: 100%;height: auto;">
                    <div class="goods-select-title">有效期</div>
                    <div class="yj-demo-time" id="yj-time-tssp">
                        <div class="yj-date">
                            <span>开始时间-结束时间</span><i class="iconfont icon-ico_calendar"></i>
                        </div>
                    </div>
                </div>
                <div class="goods-select goods-youxiaoqi" style="width: 100%;height: auto;">
                    <form class="layui-form" action="">
                        <div class="layui-form-item" pane="">
                            <div class="layui-input-block yj-check-input">
                                <input type="checkbox" name=""  lay-filter="kucun-tssp" lay-skin="primary" title="当库存低于<input readonly='' class='yj-input' placeholder='数量'>触发警报" >
                            </div>
                        </div>
                    </form>
                </div>
                <div style="clear: both"></div>

            </div>
        </form>
    </div>
    <!--新增护理产品-->
    <div class="content-view content-view-addhlgoods">
        <div class="layui-yj-header">
            <div class="layui-layer-title">
                <div>新增护理产品</div>
            </div>
            <div class="title-right" >
                销售状态<div class="yj-search active" id="yj-status-hlcp" onclick="changeYjStatus(this)"><i></i></div>
            </div>
        </div>
        <div class="goods-select-box">
            <div class="goods-select">
                <div class="goods-select-title">品牌</div>
                <div class="selectBox" id="select-hlcp-brand">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">系列</div>
                <div class="selectBox" id="select-hlcp-series">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">类型</div>
                <div class="selectBox" id="select-hlcp-type" >

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">包装</div>
                <div class="selectBox" id="select-hlcp-baozhuang">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">开瓶寿命/天*</div>
                <div class="selectBox">
                    <input type="text" class="yj-input" id="select-hlcp-shouming">
                </div>
                <span>*设定后会短信自动提醒顾客</span>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">质保时长/天</div>
                <div class="selectBox">
                    <input type="text" class="yj-input" id="select-hlcp-day">
                </div>
            </div>
            <div style="clear: both"></div>

            <div class="goods-select">
                <div class="goods-select-title">供应商</div>
                <div class="selectBox" id="select-hlcp-provider">

                </div>
            </div>
            <div style="clear: both"></div>
        </div>
        <form class="layui-form" action="">
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" lay-filter="defaultGoods"  name="type" value="0" lay-skin="primary" title="常规商品" checked >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-hlcp">
                <div class="goods-vip-btn">
                    <div class="goods-vip-left">会员折扣</div>
                    <div class="goods-vip-right" onclick="changeVipStatus(this)">
                        <div class="yj-radio"></div>
                        <span>参与会员折扣</span>
                        <em onclick="openSettingVip(this)">设置</em>
                    </div>
                </div>
                <div class="goods-select-box">
                    <div class="goods-select">
                        <div class="goods-select-title">产品编码</div>
                        <div class="selectBox" >
                            <input type="text" class="yj-input" id="select-hlcp-code-0">
                        </div>
                    </div>
                    <div class="goods-select">
                        <div class="goods-select-title">零售价</div>
                        <div class="selectBox">
                            <input type="text" class="yj-input" placeholder="零售价" id="select-hlcp-lingshou">
                        </div>
                    </div>
                    <div class="goods-select">
                        <div class="goods-select-title">成本价</div>
                        <div class="selectBox">
                            <input type="text" class="yj-input" placeholder="成本价" id="select-hlcp-chengben">
                        </div>
                    </div>
                    <div style="clear: both"></div>
                    <div class="goods-select goods-range">
                        <div class="goods-select-title">提成</div>
                        <div class="goods-range-body" onclick="openSettingTicheng()">设定提成</div>
                    </div>
                    <div style="clear: both"></div>
                </div>
            </div>
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" name="type" value="1" lay-filter="scoreGoods" lay-skin="primary" title="积分商品" >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-hlcp goods-select-box" style="display: none">
                <div class="goods-select">
                    <div class="goods-select-title">产品编码</div>
                    <div class="selectBox" >
                        <input type="text" class="yj-input" id="select-hlcp-code-1">
                    </div>
                </div>
                <div class="goods-select">
                    <div class="goods-select-title">积分价</div>
                    <div class="selectBox">
                        <input type="text" class="yj-input" placeholder="积分价" id="select-hlcp-jifen">
                    </div>
                </div>
                <div class="goods-select">
                    <div class="goods-select-title">兑换数量上限</div>
                    <div class="">
                        <input type="text" placeholder="数量" id="integralNum-hlcp" class="yj-input">
                    </div>
                </div>
                <div class="goods-select " style="width: 100%;height: auto;">
                    <div class="goods-select-title">有效期</div>
                    <div class="yj-demo-time" id="yj-time-hlcp">
                        <div class="yj-date">
                            <span>开始时间-结束时间</span><i class="iconfont icon-ico_calendar"></i>
                        </div>
                    </div>
                </div>
                <div class="goods-select goods-youxiaoqi" style="width: 100%;height: auto;">
                    <form class="layui-form" action="">
                        <div class="layui-form-item" pane="">
                            <div class="layui-input-block yj-check-input">
                                <input type="checkbox" name=""  lay-filter="kucun-hlcp" lay-skin="primary" title="当库存低于<input readonly='' class='yj-input' placeholder='数量'>触发警报" >
                            </div>
                        </div>
                    </form>
                </div>
                <div style="clear: both"></div>

            </div>
        </form>
    </div>
    <!--新增隐形眼镜-->
    <div class="content-view content-view-addyxgoods">
        <div class="layui-yj-header">
            <div class="layui-layer-title">
                <div>新增隐形眼镜</div>
            </div>
            <div class="title-right" >
                销售状态<div class="yj-search active" id="yj-status-yxyj" onclick="changeYjStatus(this)"><i></i></div>
            </div>
        </div>
        <div class="goods-select-box">
            <div class="goods-select">
                <div class="goods-select-title">品牌</div>
                <div class="selectBox" id="select-yxyj-brand" >

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">系列</div>
                <div class="selectBox" id="select-yxyj-series">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">类型</div>
                <div class="selectBox" id="select-yxyj-type">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">更换周期</div>
                <div class="selectBox" id="select-yxyj-zhouqi">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">包装</div>
                <div class="selectBox" id="select-yxyj-baozhuang">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">质保时长/天*</div>
                <div class="selectBox">
                    <input type="text" class="yj-input" id="select-yxyj-day">
                </div>
                <span>*设定后会短信自动提醒顾客</span>
            </div>
            <div style="clear: both"></div>

            <div class="goods-select">
                <div class="goods-select-title">供应商</div>
                <div class="selectBox"  id="select-yxyj-provider">

                </div>
            </div>
            <div style="clear: both"></div>
        </div>
        <form class="layui-form" action="">
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" lay-filter="defaultGoods"  name="type" value="0" lay-skin="primary" title="常规商品" checked >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-yxyj">
                <div class="goods-vip-btn">
                    <div class="goods-vip-left">会员折扣</div>
                    <div class="goods-vip-right" onclick="changeVipStatus(this)">
                        <div class="yj-radio"></div>
                        <span>参与会员折扣</span>
                        <em onclick="openSettingVip(this)">设置</em>
                    </div>
                </div>
                <div class="goods-select-box">
                    <div class="goods-select goods-range">
                        <div class="goods-select-title">零售价</div>
                        <div class="goods-range-body" onclick="openZeroPrice()">设定零售价</div>
                    </div>
                    <div class="goods-select goods-range">
                        <div class="goods-select-title">提成</div>
                        <div class="goods-range-body" onclick="openSettingTicheng()">设定提成</div>
                    </div>
                    <div style="clear: both"></div>
                </div>
            </div>
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" name="type" value="1" lay-filter="scoreGoods" lay-skin="primary" title="积分商品" >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-yxyj goods-select-box" style="display: none">
                <div class="goods-select goods-range">
                    <div class="goods-select-title">积分价</div>
                    <div class="goods-range-body" onclick="openZeroPrice(1)">设定积分价</div>
                </div>
                <div class="goods-select goods-range">
                    <div class="goods-select-title">兑换数量上限</div>
                    <div class="">
                        <input type="text" placeholder="数量" id="select-yxyj-maxnum" class="yj-input">
                    </div>
                </div>
                <div class="goods-select " style="width: 100%;height: auto;">
                    <div class="goods-select-title">有效期</div>
                    <div class="yj-demo-time" id="yj-time-yxyj">
                        <div class="yj-date">
                            <span>开始时间-结束时间</span><i class="iconfont icon-ico_calendar"></i>
                        </div>
                    </div>
                </div>
                <div class="goods-select goods-youxiaoqi" style="width: 100%;height: auto;">
                    <form class="layui-form" action="">
                        <div class="layui-form-item" pane="">
                            <div class="layui-input-block yj-check-input">
                                <input type="checkbox" name=""  lay-filter="kucun-yxyj" lay-skin="primary" title="当库存低于<input readonly='' class='yj-input' placeholder='数量'>触发警报" >
                            </div>
                        </div>
                    </form>
                </div>
                <div style="clear: both"></div>

            </div>
        </form>
    </div>
    <!--新增镜架-->
    <div class="content-view content-view-addtyqtgoods">
        <div class="layui-yj-header">
            <div class="layui-layer-title">
                <div id="jj-title"></div>
            </div>
            <div class="title-right" >
                销售状态<div class="yj-search active" id="yj-status-jj" onclick="changeYjStatus(this)"><i></i></div>
            </div>
        </div>
        <div class="goods-select-box">
            <div class="goods-select">
                <div class="goods-select-title">品牌</div>
                <div class="selectBox" id="select-jj-brand">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">系列</div>
                <div class="selectBox" id="select-jj-series">

                </div>
            </div>
            <div class="goods-select">
                <div class="goods-select-title">质保时长/天</div>
                <div class="selectBox" >
                    <input type="text" class="yj-input" id="select-jj-day">
                </div>
            </div>

            <div class="goods-select">
                <div class="goods-select-title">供应商</div>
                <div class="selectBox" id="select-jj-provider">

                </div>
            </div>

            <div style="clear: both"></div>
        </div>
        <form class="layui-form" action="">
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" lay-filter="defaultGoods"  name="type" value="0" lay-skin="primary" title="常规商品" checked >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-jj">
                <div class="goods-vip-btn">
                    <div class="goods-vip-left">会员折扣</div>
                    <div class="goods-vip-right" onclick="changeVipStatus(this)">
                        <div class="yj-radio"></div>
                        <span>参与会员折扣</span>
                        <em onclick="openSettingVip(this)">设置</em>
                    </div>
                </div>
                <div class="goods-select-box">
                    <div class="goods-select">
                        <div class="goods-select-title">产品编码</div>
                        <div class="selectBox" >
                            <input type="text" class="yj-input" id="select-jj-code-0">
                        </div>
                    </div>
                    <div class="goods-select">
                        <div class="goods-select-title">零售价</div>
                        <div class="selectBox">
                            <input type="text" class="yj-input" placeholder="零售价" id="select-jj-lingshou">
                        </div>
                    </div>
                    <div class="goods-select">
                        <div class="goods-select-title">成本价</div>
                        <div class="selectBox">
                            <input type="text" class="yj-input" placeholder="成本价" id="select-jj-chengben">
                        </div>
                    </div>
                    <div style="clear: both"></div>
                    <div class="goods-select goods-range">
                        <div class="goods-select-title">提成</div>
                        <div class="goods-range-body" onclick="openSettingTicheng()">设定提成</div>
                    </div>
                    <div style="clear: both"></div>
                </div>
            </div>
            <div class="goods-type">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block">
                        <input type="radio" name="type" value="1" lay-filter="scoreGoods" lay-skin="primary" title="积分商品" >
                    </div>
                </div>
            </div>
            <div class="goods-radio-box-jj goods-select-box" style="display: none">
                <div class="goods-select">
                    <div class="goods-select-title">产品编码</div>
                    <div class="selectBox" >
                        <input type="text" placeholder="产品编码" class="yj-input" id="select-jj-code-1">
                    </div>
                </div>
                <div class="goods-select">
                    <div class="goods-select-title">积分价</div>
                    <div class="">
                        <input type="text" placeholder="积分价" class="yj-input" id="select-jj-jifen">
                    </div>
                </div>
                <div class="goods-select">
                    <div class="goods-select-title">兑换数量上限</div>
                    <div class="">
                        <input type="text" placeholder="数量" class="yj-input" id="select-jj-maxnum">
                    </div>
                </div>
                <div class="goods-select " style="width: 100%;height: auto;">
                    <div class="goods-select-title">有效期</div>
                    <div class="yj-demo-time" id="yj-time-jj">
                        <div class="yj-date">
                            <span>开始时间-结束时间</span><i class="iconfont icon-ico_calendar"></i>
                        </div>
                    </div>
                </div>
                <div class="goods-select goods-youxiaoqi" style="width: 100%;height: auto;">
                    <form class="layui-form" action="">
                        <div class="layui-form-item" pane="">
                            <div class="layui-input-block yj-check-input">
                                <input type="checkbox" name=""  lay-filter="kucun-jj" lay-skin="primary" title="当库存低于<input readonly='' class='yj-input' placeholder='数量'>触发警报" >
                            </div>
                        </div>
                    </form>
                </div>
                <div style="clear: both"></div>
            </div>
        </form>
    </div>

    <!--设置会员折扣的弹出框-->
    <div class="content-view content-view-yj">
        <table class="table  table-self" id="vipDom">

        </table>
    </div>
    <!--设置提成的弹出框-->
    <div class="content-view content-view-ticheng">
        <div class="ticheng-checkbox">
            <form class="layui-form" action="">
                <div class="layui-input-block" style="float:left;">
                    <input type="checkbox" name="" lay-skin="primary"  title="团体统一提成" >
                </div>
                <div class="layui-input-block" style="float:left;">
                    <input type="checkbox" name="" lay-skin="primary" title="个人统一提成" >
                </div>
            </form>
        </div>
        <table class="table  table-self table-ticheng">
            <tr>
                <th>门店名称</th>
                <th>团体</th>
                <th>个人</th>
            </tr>
            <tr>
                <td>A门店</td>
                <td><input type="text" placeholder="0"></td>
                <td><input type="text" placeholder="0"></td>
            </tr>
            <tr>
                <td>A门店</td>
                <td><input type="text" placeholder="0"></td>
                <td><input type="text" placeholder="0"></td>
            </tr>
            <tr>
                <td>A门店</td>
                <td><input type="text" placeholder="0"></td>
                <td><input type="text" placeholder="0"></td>
            </tr>
            <tr>
                <td>A门店</td>
                <td><input type="text" placeholder="0"></td>
                <td><input type="text" placeholder="0"></td>
            </tr>
            <tr>
                <td>A门店</td>
                <td><input type="text" placeholder="0"></td>
                <td><input type="text" placeholder="0"></td>
            </tr>
        </table>
    </div>
    <!--设置现货范围-->
    <div class="content-view content-view-range">
        <div class="yj-content-body">
            <div class="range-header">
               <!-- <div class="now-goods-range">
                    <em></em>现货范围
                </div>-->
                <div class="dingzhi-range">
                    <em></em>定制范围
                </div>
            </div>
            <table class="layui-hide yj-layui-table" id="rangeEvent" lay-filter="rangeEvent"></table>
        </div>
    </div>
    <!--设定价格-->
    <div class="content-view content-view-price">
        <div class="layui-yj-header">
            <div class="layui-layer-title">
                <div>设定价格<span>规格: 片</span></div>
            </div>
            <div class="title-right" onclick="openRedTip()" >
                设置预警库存
            </div>
        </div>
        <ul class="tab-ul" id="setPriceBtn">
            <li class="active" onclick="setPrice(1)">产品编码</li>
            <li onclick="setPrice(2)">零售价/元</li>
            <li onclick="setPrice(3)">批发价/元</li>
            <li onclick="setPrice(4)">备货量/片</li>
            <li onclick="setPrice(5)">积分价/分</li>
        </ul>
        <div class="price-table-box">
            <table class="layui-hide yj-layui-table" id="priceEvent" lay-filter="priceEvent"></table>
        </div>
    </div>
    <!--设置预警库存-->
    <div class="content-view content-view-yujing">
        <div class="goods-type">
            <form class="layui-form" action="">
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block yj-check-input">
                        <input type="checkbox" name="" lay-filter="kucun" lay-skin="primary" title="当现货库存为0的产品达到<input readonly='' class='yj-input' placeholder='数量'>个提醒" >
                    </div>
                </div>
                <div class="layui-form-item" pane="">
                    <div class="layui-input-block yj-check-input">
                        <input type="checkbox" name="" lay-filter="kucun" lay-skin="primary" title="当总库存少于备货量百分之<input readonly='' class='yj-input' placeholder='数量'>提醒" >
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!--镜片库存详情-->
    <div class="content-view content-view-numInfo">
        <div class="layui-yj-header">
            <div class="layui-layer-title">
                <div>A品牌A系列<span>9217个</span></div>
            </div>
            <div class="title-right title-num-info-right" >
                <div class="iconfont icon-ico_table active" onclick="setNumInfo(1)"></div>
                <div class="iconfont icon-ico_list" onclick="setNumInfo(2)"></div>
            </div>
        </div>
        <div class="price-table-box">
            <div class="numInfoBox">
                <table class="yj-layui-table" id="numInfoEvent" lay-filter="numInfoEvent"></table>
            </div>
            <div class="numInfoBox">
                <table class="yj-layui-table" id="numInfoTable"></table>
            </div>
        </div>
    </div>

    <form style="opacity: 0" action="" id="uploadForm" autocomplete="off" enctype="multipart/form-data">
        <input style="height: 0;width: 0;" type="file" name="file" accept="image/jpeg，image/jpg，image/png,image/jp2，image/jpe"/>
    </form>

    <!--js依赖开始-->
    <!--bootstrap依赖于jQuery，jQuery.js必须放在BS.js之前-->
    <script src="../resource/js/jquery.min.js"></script>
    <script src="../resource/js/bootstrap.js"></script>
    <!--js依赖结束-->

    <!-- Bootstrap table -->
    <script src="../resource/js/plugins/bootstarp-table/js/bootstrap-table.js"></script>
    <script src="../resource/js/plugins/bootstarp-table/js/bootstrap-table-zh-CN.min.js"></script>

    <script src="../resource/js/plugins/layer/layer.js"></script>
    <script src="../resource/layui/layui.js"></script>

    <script src="../resource/js/lib/quakooLib/QuakooBase-1.0.0.js"></script>
    <script src="../resource/js/lib/quakooLib/QuakooConfig-1.0.0.js"></script>
    <script src="../resource/js/lib/quakooLib/QuakooBasePc-1.0.0.js"></script>
    <script src="../resource/js/lib/quakoo/Config.js"></script>
    <script src="../resource/js/lib/quakoo/project.js"></script>
    <script src="../resource/common/common.js?" +Math.random()></script>
    <script src="../resource/js/template-native.js"></script>
    <script src="../resource/js/yanjing.js"></script>
    <script src="../resource/js/yanjing/daterange.js"></script>
    <!--一级类别-->
    <script type="text/html" id="categoryTmp">
        <%for(var i=0;i< list.length;i++){%>
            <%if(list[i].pid==0){%>
                <li id="category<%=list[i].id%>" onclick="chooseGoodsType('<%=list[i].id%>')"><%=list[i].name%></li>
            <%}%>
        <%}%>
    </script>
    <!--下拉选择模板-->
    <script type="text/html" id="selectTagTmp">
        <div class="select-box-header">
            <span class="text"><%=title%></span> <i class="iconfont icon-ico_arrow_down" ></i>
        </div>
        <div class="optionBox">
            <ul class="optionUL">
                <%for(var i=0;i< list.length;i++){%>
                <li value="<%=list[i].id%>" data-pnid="<%if(list[i].pnid){%><%=list[i].pnid%><%}%>"><%if(list[i].name){%><%=list[i].name%><%}else{%><%=list[i].content%><%}%></li>
                <%}%>
            </ul>
        </div>
    </script>
    <!--会员等级-->
    <script type="text/html" id="vipTmp">
        <tr>
            <th>会员等级</th>
            <th>折扣</th>
        </tr>
        <%for(var i=0;i< list.length;i++){%>
        <tr>
            <td><%=list[i].title%></td>
            <td><input type="text" data-id="<%=list[i].id%>" class="vipInput" placeholder=""></td>
        </tr>
        <%}%>
    </script>

    <script>
        var subid = quakooUser.getUserInfo().psid;//企业id
        var cid = '';//类目id
        var pid = '';//供应商ID
        var bid = '';//品牌ID
        var sid = '';//系列ID
        var name = '';//搜索关键字
        var saleStatus = '';//筛选条件的销售状态0开启1关闭
        var jjDayPnid = 4;//镜架质保时长的pnid
        var yxyjDayPnid = 8;//隐形眼镜质保时长的pnid
        var tyjDayPnid = 9;//太阳镜质保时长的pnid
        var hlcpDayPnid = 13;//护理产品质保时长的pnid
        var hlcpShoumingPnid = 12;//护理产品开瓶寿命的pnid
        var qtspDayPnid = 14;//其它商品质保时长的pnid

        var ballData = '';//球数据
        var columnData = '';//柱数据

        var params = {};//添加商品所需要的参数  key  类目id；value：所需参数

        var columns;        //其它商品的表格
        var columnsTeshu;   //特殊商品的表格
        var $table =  $('#yj-table');//商品列表表格
        var TableInit = function (columns) {
            var oTableInit = new Object();
            //初始化Table
            oTableInit.Init = function () {
                $table.bootstrapTable('destroy')
                $table.bootstrapTable({
                    url:config.getUrl_product_getSPUPager(),
                    classes:"table",
                    pagination:true,        //是否显示分页
                    sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
                    pageNumber:1,                       //初始化加载第一页，默认第一页
                    pageSize: 10,
                    pageList: [5, 10, 15, 20],
                    sortable: false,
                    sortOrder: "asc",
                    showColumns: true,
                    strictSearch: true,
                    locale: "zh-CN",
                    paginationHAlign:"center",
                    clickToSelect:true,
                    paginationLoop:false,
                    columns:columns,
                    queryParams:function (param) {
                        if(cid){param.cid = cid;}
                        if(bid){param.bid = bid;}
                        if(pid){param.pid = pid;}
                        if(sid){param.sid = sid;}
                        if(name){param.name = name;}
                        if(saleStatus){param.saleStatus = saleStatus;}
                        param.subid = quakooUser.getUserInfo().psid;
                        param.token = quakooUser.getUserInfo().token;
                        return param
                    }
                });
            };
            return oTableInit;
        };
        columns = [
            {checkbox: true, valign:"middle"},
            {field: "brandName", title: "品牌", valign:"middle"},
            {field: "seriesName", title: "系列", valign:"middle"},
            {field: "", title: "实际·挂起", valign:"middle",formatter: function (value, row, index) {
                    return '100·2';
                }
            },
            {field: "canUseNum", title: "可用数量", valign:"middle"},
            {field: "", title: "零售价", valign:"middle",formatter: function (value, row, index) {
                    return '￥10';
                }
            },
            {field: "", title: "成本价", valign:"middle",formatter: function (value, row, index) {
                    return '￥10';
                }
            },
            {field: "", title: "提成", valign:"middle",formatter: function (value, row, index) {
                    return '<span class="goods-ticheng">团</span>';
                }
            },
            {field: "", title: "库存总值", valign:"middle",formatter: function (value, row, index) {
                    return '￥10000';
                }
            },
            {field: "saleStatus", title: "销售状态", valign:"middle",events: {"click .yj-search":function (e,value, row, index) {
                        quakooUtils.stopEventBubble()
                        $(this).toggleClass('active')
                    }},formatter: function (value, row, index) {
                    if(value==0){
                        return '<div class="yj-search active" onclick="changeYjStatus(this)"><i></i></div>';
                    }else{
                        return '<div class="yj-search" onclick="changeYjStatus(this)"><i></i></div>';
                    }
                }
            },
            {field: "", title: "操作", valign:"middle",formatter: function (value, row, index) {
                    return '<button class="btn btn-primary" type="button" onclick="openNumInfo()" style="margin-right: 8px;">库存详情</button><button class="btn btn-info">编辑</button>';
                }
            }
        ];

        columnsTeshu = [
            {checkbox: true,valign:"middle"},
            {field: "icon", title: "主图", valign:"middle",formatter: function (value, row, index) {
                    return '<img class="yj-table-img" src="'+value+'">';
                }
            },
            {field: "", title: "名称", valign:"middle",formatter: function (value, row, index) {
                    return '系列名称';
                }
            },
            {field: "", title: "实际·挂起", valign:"middle",formatter: function (value, row, index) {
                    return '100·2';
                }
            },
            {field: "", title: "可用数量", valign:"middle",formatter: function (value, row, index) {
                    return '100';
                }
            },
            {field: "", title: "积分价", valign:"middle",formatter: function (value, row, index) {
                    return '￥10';
                }
            },
            {field: "", title: "成本价", valign:"middle",formatter: function (value, row, index) {
                    return '￥10';
                }
            },

            {field: "", title: "库存总值", valign:"middle",formatter: function (value, row, index) {
                    return '￥10000';
                }
            },
            {field: "", title: "销售状态", valign:"middle",formatter: function (value, row, index) {
                    return '<div class="yj-search" onclick="changeYjStatus(this)"><i></i></div>';
                }
            },
            {field: "", title: "操作", valign:"middle",formatter: function (value, row, index) {
                    return '<button class="btn btn-primary" style="margin-right: 8px;">编辑</button><button class="btn btn-danger">删除</button>';
                }
            }
        ];


        //获取一级类目
        quakooData.ajaxGetData(config.getUrl_productCategory_getSubAllList(),{subid:subid},function (ret) {
            if(ret && ret.success){
                if(ret.data.length>0){
                    var html = template('categoryTmp',{list:ret.data});
                    $('#categoryDom').html(html);
                    chooseGoodsType(ret.data[0].id)
                }
            }
        })
        //获取供应商
        quakooData.ajaxGetData(config.getUrl_productProvider_getSubAllList(),{subid:subid},function (ret) {
            if(ret && ret.success){
                //商品列表的筛选
                var html = template('selectTagTmp',{title:'供应商',list:ret.data});
                $('#select-form').html(html);
                selectTag($("#select-form"),function (ret) {
                    pid = ret.value;
                    chooseGoodsType()
                })
                //新增镜片的供应商
                $('#select-jp-provider').html(html);

                //新增镜架的供应商
                $('#select-jj-provider').html(html);

                //新增隐形眼镜的供应商
                $('#select-yxyj-provider').html(html);
                //新增隐护理产品的供应商
                $('#select-hlcp-provider').html(html);


            }
        })
        //获取品牌
        quakooData.ajaxGetData(config.getUrl_productBrand_getSubAllList(),{subid:subid},function (ret) {
            if(ret && ret.success){
                var html = template('selectTagTmp',{title:'全部商品类型',list:ret.data});
                //商品列表的筛选
                $('#select-type').html(html);
                selectTag($("#select-type"),function (data) {
                    if(data.value){
                        bid = data.value;
                        chooseGoodsType()
                        //获取品牌下的系列列表
                        quakooData.ajaxGetData(config.getUrl_productSeries_getSubAllList(),{subid:quakooUser.getUserInfo().psid,bid:data.value},function (ret1) {
                            if(ret1 && ret1.success){
                                if(ret1.data.length>0){
                                    var html = template('selectTagTmp',{title:'系列',list:ret1.data});
                                    $('#select-series').html(html).show();
                                    selectTag($("#select-series"),function (series) {
                                        sid = series.value;
                                        chooseGoodsType()
                                    })
                                }else{
                                    $('#select-series').hide();
                                }
                            }
                        })
                    }else{
                        $('#select-series').hide();
                    }
                })
                //新增镜片的品牌
                $('#select-jp-brand').html(html);
                //新增镜架的品牌
                $('#select-jj-brand').html(html);
                //新增隐形眼镜的品牌
                $('#select-yxyj-brand').html(html);
                //新增护理产品的品牌
                $('#select-hlcp-brand').html(html);
            }
        })
        //获取属性-球
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:15},function (ret) {
            if(ret && ret.success){
                ballData = ret.data.sort(function (a,b) {
                    return b.content-a.content;
                });
            }
        })
        //获取属性-柱
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:16},function (ret) {
            if(ret && ret.success){
                columnData = ret.data.sort(function (a,b) {
                    return b.content-a.content;
                });
            }
        })
        //获取属性-焦点
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:1},function (ret) {
            var html = template('selectTagTmp',{title:'焦点',list:ret.data});
            $('#select-jp-jiaodian').html(html);
        })
        //获取属性-折射率
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:2},function (ret) {
            var html = template('selectTagTmp',{title:'折射率',list:ret.data});
            $('#select-jp-zheshelv').html(html);
        })
        //获取属性-功能
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:3},function (ret) {
            var html = template('selectTagTmp',{title:'功能',list:ret.data});
            $('#select-jp-gongneng').html(html);
        })

        //获取属性-隐形眼镜类型/5
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:5},function (ret) {
            var html = template('selectTagTmp',{title:'类型',list:ret.data});
            $('#select-yxyj-type').html(html);
        })
        //获取属性-隐形眼镜更换周期/6
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:6},function (ret) {
            var html = template('selectTagTmp',{title:'更换周期',list:ret.data});
            $('#select-yxyj-zhouqi').html(html);
        })
        //获取属性-隐形眼镜包装/7
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:7},function (ret) {
            var html = template('selectTagTmp',{title:'包装',list:ret.data});
            $('#select-yxyj-baozhuang').html(html);
        })
        //获取属性-护理产品:类型/10
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:10},function (ret) {
            var html = template('selectTagTmp',{title:'质保时长',list:ret.data});
            $('#select-hlcp-type').html(html);
        })
        //获取属性-护理产品:包装11
        quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:11},function (ret) {
            var html = template('selectTagTmp',{title:'质保时长',list:ret.data});
            $('#select-hlcp-baozhuang').html(html);
        })


        var jpDate = new dateRange('#yj-time-jp',true);
        jpDate.init()
        var jjDate = new dateRange('#yj-time-jj',true);
        jjDate.init()
        var yxyjDate = new dateRange('#yj-time-yxyj',true);
        yxyjDate.init()
        var hlcpDate = new dateRange('#yj-time-hlcp',true);
        hlcpDate.init()
        var tsspDate = new dateRange('#yj-time-tssp',true);
        tsspDate.init()
        //选择销售状态
        selectTag($("#select-status"),function (ret) {
            saleStatus = ret.value;
            chooseGoodsType()
        })

        layui.use('form', function(){
            var form = layui.form; //只有执行了这一步，部分表单元素才会自动修饰成功
            form.render();
        });

        //选择一级类目
        function chooseGoodsType(value){
            if(value){
                cid = value;
            }
            if($('#category'+cid).text()=='特殊商品'){
                var Table = new TableInit(columnsTeshu);
                Table.Init();
            }else{
                var Table = new TableInit(columns);
                Table.Init();
            }
            $('#category'+cid).addClass('active').siblings().removeClass('active');
        }

        //设置供应商
        function suppliers(){

        }
        //添加商品
        function addGoods() {
            if($('#category'+cid).text()=='镜架' || $('#category'+cid).text()=='太阳镜' || $('#category'+cid).text()=='其它商品'){
                layer.open({
                    type: 1,shade: 0.01,title:'',
                    skin: 'layui-layer-add-goods layui-layer-addhlgoods', //样式类名
                    // area: ['360px', '535px'],
                    anim: 0,
                    maxWidth:'360',
                    closeBtn: 0, //不显示关闭按钮
                    resize:false,
                    shadeClose: true, //开启遮罩关闭
                    content: $('.content-view-addtyqtgoods'),
                    btn: ['取消','新增'],
                    yes: function(index, layero){
                        layer.close(index)
                    },
                    btn2: function(){
                        //销售状态  0开启  1关闭
                        if($('#yj-status-jj').hasClass('active')){
                            params[cid].saleStatus = 0;
                        }else{
                            params[cid].saleStatus = 1;
                        }
                        if($('#category'+cid).text()=='镜架'){
                            params[cid].properties[jjDayPnid] = $('#select-jj-day').val();
                        }else if($('#category'+cid).text()=='太阳镜'){
                            params[cid].properties[tyjDayPnid] = $('#select-jj-day').val();
                        }else if($('#category'+cid).text()=='其它商品'){
                            params[cid].properties[qtspDayPnid] = $('#select-jj-day').val();
                        }
                        params[cid].skuJson = [{}];
                        if(params[cid].type==1){
                            if(jjDate.getTime()[2]){
                                params[cid].integralStartTime = jjDate.getTime()[2];
                            }
                            if(jjDate.getTime()[3]){
                                params[cid].integralEndTime = jjDate.getTime()[3];
                            }
                            if($('#select-jj-maxnum').val()){
                                params[cid].integralNum = $('#select-jj-maxnum').val();
                            }
                            params[cid].skuJson[0].code = $('#select-jj-code-1').val();
                            params[cid].skuJson[0].integralPrice = $('#select-jj-jifen').val();
                        }else{
                            params[cid].skuJson[0].retailPrice = $('#select-jj-lingshou').val();
                            params[cid].skuJson[0].costPrice = $('#select-jj-chengben').val();
                            params[cid].skuJson[0].code = $('#select-jj-code-0').val();
                        }
                        addYjGoods()
                    },
                    success: function(layero, index){
                        $('#jj-title').html('新建'+$('#category'+cid).text())
                        if(quakooUtils.isBlack(params[cid])){
                            params[cid] = {};
                        }
                        layui.use('form', function(){
                            var form = layui.form;
                            form.on('radio()', function(data){
                                if(params[cid].type == data.value){
                                    return
                                }
                                $('.goods-radio-box-jj').slideUp();
                                $('.goods-radio-box-jj').eq(data.value).slideDown();
                                params[cid].type = data.value;
                            });
                            //库存
                            form.on('checkbox(kucun-jj)', function(data){
                                if(data.elem.checked){
                                    //是否被选中，true或者false
                                    $(data.othis).find('input').attr('readonly',false)
                                }else{
                                    $(data.othis).find('input').attr('readonly','readonly').val('')
                                }
                            });
                        });
                        $('.yj-check-input input').click(function (e) {
                            quakooUtils.stopEventBubble(e)
                        })
                        params[cid].subid = subid;
                        params[cid].cid = cid;
                        params[cid].properties = {};
                        params[cid].skuJson = [];
                        params[cid].productCustomRangeList = [];
                        params[cid].ugDiscount = [];
                        params[cid].type = params[cid].type? params[cid].type:0;
                        //品牌/系列
                        selectTag($("#select-jj-brand"),function (ret) {
                            params[cid] .bid = ret.value;
                            $('#select-jj-series').html('');
                            //获取品牌下的系列列表
                            quakooData.ajaxGetData(config.getUrl_productSeries_getSubAllList(),{subid:quakooUser.getUserInfo().psid,bid:ret.value},function (ret1) {
                                if(ret1 && ret1.success){
                                    if(ret1.data.length>0){
                                        var html = template('selectTagTmp',{title:'系列',list:ret1.data});
                                        $('#select-jj-series').html(html);
                                        selectTag($("#select-jj-series"),function (series) {
                                            params[cid].sid = series.value;
                                        })
                                    }
                                }
                            })
                        })
                        //供应商
                        selectTag($("#select-jj-provider"),function (ret) {
                            params[cid].pid = ret.value;
                        })
                    }
                });
            }else if($('#category'+cid).text()=='镜片'){
                layer.open({
                    type: 1,shade: 0.01,title:'新增镜片',
                    skin: 'layui-layer-add-goods', //样式类名
                    // area: ['360px', '535px'],
                    anim: 0,
                    maxWidth:'360',
                    closeBtn: 0, //不显示关闭按钮
                    resize:false,
                    shadeClose: true, //开启遮罩关闭
                    content: $('.content-view-addgoods'),
                    btn: ['取消','新增'],
                    yes: function(index, layero){
                        layer.close(index)
                    },
                    btn2: function(){
                        //销售状态  0开启  1关闭
                        if($('#yj-status-jp').hasClass('active')){
                            params[cid].saleStatus = 0;
                        }else{
                            params[cid].saleStatus = 1;
                        }
                        if(params[cid].type==1){
                            if(jpDate.getTime()[2]){
                                params[cid].integralStartTime = jpDate.getTime()[2];
                            }
                            if(jpDate.getTime()[3]){
                                params[cid].integralEndTime = jpDate.getTime()[3];
                            }
                            if($('#select-jp-maxnum').val()){
                                params[cid].integralNum = $('#select-jp-maxnum').val();
                            }
                        }
                        addYjGoods()
                    },
                    success: function(layero, index){
                        if(quakooUtils.isBlack(params[cid])){
                            params[cid] = {};
                        }
                        $('.yj-check-input input').click(function (e) {
                            quakooUtils.stopEventBubble(e)
                        })
                        layui.use('form', function(){
                            var form = layui.form;
                            form.on('radio()', function(data){
                                if(params[cid].type == data.value){
                                    return
                                }
                                $('.goods-radio-box-jp').slideUp();
                                $('.goods-radio-box-jp').eq(data.value).slideDown();
                                params[cid].type = data.value;
                            });
                            //库存
                            form.on('checkbox(kucun-jp)', function(data){
                                if(data.elem.checked){
                                    //是否被选中，true或者false
                                    $(data.othis).find('input').attr('readonly',false)
                                }else{
                                    $(data.othis).find('input').attr('readonly','readonly').val('')
                                }
                            });
                        });
                        //供应商
                        selectTag($("#select-jp-provider"),function (ret) {
                            params[cid].pid = ret.value;
                        })
                        params[cid].subid = subid;
                        params[cid].cid = cid;
                        params[cid].properties = {};
                        params[cid].skuJson = [];
                        params[cid].productCustomRangeList = [];
                        params[cid].ugDiscount = [];
                        params[cid].type = params[cid].type? params[cid].type:0;
                        //新增镜片的品牌
                        selectTag($("#select-jp-brand"),function (ret) {
                            params[cid] .bid = ret.value;
                            $('#select-jp-series').html('');
                            //获取品牌下的系列列表
                            quakooData.ajaxGetData(config.getUrl_productSeries_getSubAllList(),{subid:subid,bid:ret.value},function (ret1) {
                                if(ret1 && ret1.success){
                                    if(ret1.data.length>0){
                                        var html = template('selectTagTmp',{title:'系列',list:ret1.data});
                                        $('#select-jp-series').html(html);
                                        selectTag($("#select-jp-series"),function (series) {
                                            params[cid].sid = series.value;
                                        })
                                    }
                                }
                            })
                        })
                        //焦点
                        selectTag($("#select-jp-jiaodian"),function (data) {
                            params[cid].properties[data.el.find('.optionUL li').attr('data-pnid')] = data.value;
                        })
                        selectTag($("#select-jp-zheshelv"),function (data) {
                            params[cid].properties[data.el.find('.optionUL li').attr('data-pnid')] = data.value;
                        })
                        selectTag($("#select-jp-gongneng"),function (data) {
                            params[cid].properties[data.el.find('.optionUL li').attr('data-pnid')] = data.value;
                        })
                    }
                });
            }else if($('#category'+cid).text()=='特殊商品'){
                layer.open({
                    type: 1,shade: 0.01,title:'新增特殊商品',
                    skin: 'layui-layer-add-goods layui-layer-addtsgoods', //样式类名
                    // area: ['360px', '535px'],
                    anim: 0,
                    maxWidth:'360',
                    closeBtn: 0, //不显示关闭按钮
                    resize:false,
                    shadeClose: true, //开启遮罩关闭
                    content: $('.content-view-addtsgoods'),
                    btn: ['取消','新增'],
                    yes: function(index, layero){
                        layer.close(index)
                    },
                    btn2: function(){
                        //销售状态  0开启  1关闭
                        if($('#yj-status-tssp').hasClass('active')){
                            params[cid].saleStatus = 0;
                        }else{
                            params[cid].saleStatus = 1;
                        }
                        params[cid].skuJson = [{}];
                        params[cid].skuJson[0].num = $('#select-tssp-num').val();
                        params[cid].skuJson[0].code = $('#select-tssp-code').val();
                        params[cid].skuJson[0].costPrice = $('#select-tssp-costPrice').val();
                        params[cid].icon = $('#cover').attr('real-src');
                        params[cid].name = $('#select-tssp-name').val();
                        if(params[cid].type==1){
                            if(tsspDate.getTime()[2]){
                                params[cid].integralStartTime = tsspDate.getTime()[2];
                            }
                            if(tsspDate.getTime()[3]){
                                params[cid].integralEndTime = tsspDate.getTime()[3];
                            }
                            if($('#select-tssp-maxnum').val()){
                                params[cid].integralNum = $('#select-tssp-maxnum').val();
                            }
                            params[cid].skuJson[0].integralPrice = $('#select-tssp-jifen').val();
                        }

                        addYjGoods()
                    },
                    success: function(layero, index){
                        if(quakooUtils.isBlack(params[cid])){
                            params[cid] = {};
                        }
                        checkGoodsType()
                        $('.yj-check-input input').click(function (e) {
                            quakooUtils.stopEventBubble(e)
                        })
                        layui.use('form', function(){
                            var form = layui.form;
                            form.on('radio()', function(data){
                                if(params[cid].type == data.value){
                                    return
                                }
                                $('.goods-radio-box-tssp').slideUp();
                                $('.goods-radio-box-tssp').eq(data.value).slideDown();
                                params[cid].type = data.value;
                            });
                            //库存
                            form.on('checkbox(kucun-tssp)', function(data){
                                if(data.elem.checked){
                                    //是否被选中，true或者false
                                    $(data.othis).find('input').attr('readonly',false)
                                }else{
                                    $(data.othis).find('input').attr('readonly','readonly').val('')
                                }
                            });
                        });
                        params[cid].subid = subid;
                        params[cid].cid = cid;
                        params[cid].bid = -1;
                        params[cid].properties = {};
                        params[cid].skuJson = [];
                        params[cid].productCustomRangeList = [];
                        params[cid].ugDiscount = [];
                        params[cid].type = params[cid].type? params[cid].type:0;
                    }
                });
            }else if($('#category'+cid).text()=='护理产品'){
                layer.open({
                    type: 1,shade: 0.01,title:'新增护理产品',
                    skin: 'layui-layer-add-goods layui-layer-addhlgoods', //样式类名
                    // area: ['360px', '535px'],
                    anim: 0,
                    maxWidth:'360',
                    closeBtn: 0, //不显示关闭按钮
                    resize:false,
                    shadeClose: true, //开启遮罩关闭
                    content: $('.content-view-addhlgoods'),
                    btn: ['取消','新增'],
                    yes: function(index, layero){
                        layer.close(index)
                    },
                    btn2: function(){
                        //销售状态  0开启  1关闭
                        if($('#yj-status-hlcp').hasClass('active')){
                            params[cid].saleStatus = 0;
                        }else{
                            params[cid].saleStatus = 1;
                        }
                        params[cid].properties[hlcpDayPnid] = $('#select-hlcp-day').val();
                        params[cid].properties[hlcpShoumingPnid] = $('#select-hlcp-shouming').val();
                        params[cid].skuJson = [{}];
                        if(params[cid].type==1){
                            if(hlcpDate.getTime()[2]){
                                params[cid].integralStartTime = hlcpDate.getTime()[2];
                            }
                            if(hlcpDate.getTime()[3]){
                                params[cid].integralEndTime = hlcpDate.getTime()[3];
                            }
                            if($('#select-hlcp-maxnum').val()){
                                params[cid].integralNum = $('#select-hlcp-maxnum').val();
                            }
                            params[cid].skuJson[0].code = $('#select-hlcp-code-1').val();
                            params[cid].skuJson[0].integralPrice = $('#select-hlcp-jifen').val();
                        }else{
                            params[cid].skuJson[0].code = $('#select-hlcp-code-0').val();
                            params[cid].skuJson[0].retailPrice = $('#select-hlcp-lingshou').val();
                            params[cid].skuJson[0].costPrice = $('#select-hlcp-chengben').val();
                        }
                        addYjGoods()
                    },
                    success: function(layero, index){
                        if(quakooUtils.isBlack(params[cid])){
                            params[cid] = {};
                        }
                        $('.yj-check-input input').click(function (e) {
                            quakooUtils.stopEventBubble(e)
                        })
                        layui.use('form', function(){
                            var form = layui.form;
                            form.on('radio()', function(data){
                                if(params[cid].type == data.value){
                                    return
                                }
                                $('.goods-radio-box-hlcp').slideUp();
                                $('.goods-radio-box-hlcp').eq(data.value).slideDown();
                                params[cid].type = data.value;
                            });
                            //库存
                            form.on('checkbox(kucun-hlcp)', function(data){
                                if(data.elem.checked){
                                    //是否被选中，true或者false
                                    $(data.othis).find('input').attr('readonly',false)
                                }else{
                                    $(data.othis).find('input').attr('readonly','readonly').val('')
                                }
                            });
                        });
                        //供应商
                        selectTag($("#select-hlcp-provider"),function (ret) {
                            params[cid].pid = ret.value;
                        })
                        params[cid].subid = subid;
                        params[cid].cid = cid;
                        params[cid].properties = {};
                        params[cid].skuJson = [];
                        params[cid].productCustomRangeList = [];
                        params[cid].ugDiscount = [];
                        params[cid].type = params[cid].type? params[cid].type:0;
                        //新增镜片的品牌
                        selectTag($("#select-hlcp-brand"),function (ret) {
                            params[cid] .bid = ret.value;
                            $('#select-jp-series').html('');
                            //获取品牌下的系列列表
                            quakooData.ajaxGetData(config.getUrl_productSeries_getSubAllList(),{subid:subid,bid:ret.value},function (ret1) {
                                if(ret1 && ret1.success){
                                    if(ret1.data.length>0){
                                        var html = template('selectTagTmp',{title:'系列',list:ret1.data});
                                        $('#select-hlcp-series').html(html);
                                        selectTag($("#select-hlcp-series"),function (series) {
                                            params[cid].sid = series.value;
                                        })
                                    }
                                }
                            })
                        })
                        //类型
                        selectTag($("#select-hlcp-type"),function (data) {
                            params[cid].properties[data.el.find('.optionUL li').attr('data-pnid')] = data.value;
                        })
                        //包装
                        selectTag($("#select-hlcp-baozhuang"),function (data) {
                            params[cid].properties[data.el.find('.optionUL li').attr('data-pnid')] = data.value;
                        })

                    }
                });
            }else if($('#category'+cid).text()=='隐形眼镜'){
                layer.open({
                    type: 1,shade: 0.01,title:'新增隐形眼镜',
                    skin: 'layui-layer-add-goods layui-layer-addhlgoods', //样式类名
                    // area: ['360px', '535px'],
                    anim: 0,
                    maxWidth:'360',
                    closeBtn: 0, //不显示关闭按钮
                    resize:false,
                    shadeClose: true, //开启遮罩关闭
                    content: $('.content-view-addyxgoods'),
                    btn: ['取消','新增'],
                    yes: function(index, layero){
                        layer.close(index)
                    },
                    btn2: function(){
                        //销售状态  0开启  1关闭
                        if($('#yj-status-yxyj').hasClass('active')){
                            params[cid].saleStatus = 0;
                        }else{
                            params[cid].saleStatus = 1;
                        }
                        params[cid].properties[yxyjDayPnid] = $('#select-yxyj-day').val();
                        if(params[cid].type==1){
                            if(yxyjDate.getTime()[2]){
                                params[cid].integralStartTime = yxyjDate.getTime()[2];
                            }
                            if(yxyjDate.getTime()[3]){
                                params[cid].integralEndTime = yxyjDate.getTime()[3];
                            }
                            if($('#select-yxyj-maxnum').val()){
                                params[cid].integralNum = $('#select-yxyj-maxnum').val();
                            }
                        }
                        addYjGoods()
                    },
                    success: function(layero, index){
                        if(quakooUtils.isBlack(params[cid])){
                            params[cid] = {};
                        }
                        $('.yj-check-input input').click(function (e) {
                            quakooUtils.stopEventBubble(e)
                        })
                        layui.use('form', function(){
                            var form = layui.form;
                            form.on('radio()', function(data){
                                if(params[cid].type == data.value){
                                    return
                                }
                                $('.goods-radio-box-yxyj').slideUp();
                                $('.goods-radio-box-yxyj').eq(data.value).slideDown();
                                params[cid].type = data.value;
                            });
                            //库存
                            form.on('checkbox(kucun-yxyj)', function(data){
                                if(data.elem.checked){
                                    //是否被选中，true或者false
                                    $(data.othis).find('input').attr('readonly',false)
                                }else{
                                    $(data.othis).find('input').attr('readonly','readonly').val('')
                                }
                            });
                        });
                        //供应商
                        selectTag($("#select-yxyj-provider"),function (ret) {
                            params[cid].pid = ret.value;
                        })
                        params[cid].subid = subid;
                        params[cid].cid = cid;
                        params[cid].properties = {};
                        params[cid].skuJson = [];
                        params[cid].productCustomRangeList = [];
                        params[cid].ugDiscount = [];
                        params[cid].type = params[cid].type? params[cid].type:0;
                        //新增镜片的品牌
                        selectTag($("#select-yxyj-brand"),function (ret) {
                            params[cid] .bid = ret.value;
                            $('#select-yxyj-series').html('');
                            //获取品牌下的系列列表
                            quakooData.ajaxGetData(config.getUrl_productSeries_getSubAllList(),{subid:subid,bid:ret.value},function (ret1) {
                                if(ret1 && ret1.success){
                                    if(ret1.data.length>0){
                                        var html = template('selectTagTmp',{title:'系列',list:ret1.data});
                                        $('#select-yxyj-series').html(html);
                                        selectTag($("#select-yxyj-series"),function (series) {
                                            params[cid].sid = series.value;
                                        })
                                    }
                                }
                            })
                        })
                        //类型
                        selectTag($("#select-yxyj-type"),function (data) {
                            params[cid].properties[data.el.find('.optionUL li').attr('data-pnid')] = data.value;
                        })
                        //更换周期
                        selectTag($("#select-yxyj-zhouqi"),function (data) {
                            params[cid].properties[data.el.find('.optionUL li').attr('data-pnid')] = data.value;
                        })
                        //包装
                        selectTag($("#select-yxyj-baozhuang"),function (data) {
                            params[cid].properties[data.el.find('.optionUL li').attr('data-pnid')] = data.value;
                        })

                    }
                });
            }
        }

        //监听选择常规商品和积分商品
        function checkGoodsType() {

        }

        //改变销售状态
        function changeYjStatus(self) {
            quakooUtils.stopEventBubble()
            $(self).toggleClass('active')
        }
        //改变会员折扣
        function changeVipStatus(self) {
            quakooUtils.stopEventBubble()
            $(self).toggleClass('active')
        }
        //打开会员折扣
        function openSettingVip(self) {
            if($(self).parent().hasClass('active')){
                layer.open({
                    type: 1,shade: 0.01,title:'设置会员折扣',
                    skin: 'layui-layer-yj layui-layer-vip', //样式类名
                    anim: 0,
                    area:['360px','336px'],
                    closeBtn: 0, //不显示关闭按钮
                    resize:false,
                    shadeClose: true, //开启遮罩关闭
                    content: $('.content-view-yj'),
                    btn: ['取消','确定'],
                    yes: function(index, layero){
                        layer.close(index)
                    },
                    btn2: function(){
                        var arr = [];
                        $('.vipInput').each(function (index,item) {
                            if(quakooUtils.isNotBlack(item.value)){
                                var obj = {};
                                obj.ugid = item.getAttribute('data-id');
                                obj.discount = item.value;
                                arr.push(obj)
                            }
                        })
                        params[cid].ugDiscount = arr;
                    },
                    success: function(layero, index){
                        quakooData.ajaxGetData(config.getUrl_usergrade_getAllList(),{subid:subid},function (ret) {
                            var html = template('vipTmp',{list:ret.rows});
                            $('#vipDom').html(html);
                            $('.vipInput').each(function (index,item) {
                                item.oninput = function(){
                                    if(!quakooUtils.isNum(this.value)){
                                        layer.msg('折扣必须是数字');
                                        this.value = ''
                                    }
                                }
                            })
                        })
                    }
                });
            }
            quakooUtils.stopEventBubble()
        }
        //设定现货范围
        var momentRangeData = {};//暂时存储定位范围信息
        function openGoodsRange(title) {
            layer.open({
                type: 1,shade: 0.01,title:'设定'+title+'范围<span>点击或框选单元格来设定</span>',
                skin: 'layui-layer-yj', //样式类名
                anim: 0,
                area:['720px','560px'],
                closeBtn: 0, //不显示关闭按钮
                resize:false,
                shadeClose: true, //开启遮罩关闭
                content: $('.content-view-range'),
                btn: ['取消','保存'],
                yes: function(index, layero){
                    layer.close(index)
                },
                btn2: function(index, layero){
                    params[cid].productCustomRangeList = [];
                    for(var i in momentRangeData){
                        if(momentRangeData[i]){
                            params[cid].productCustomRangeList.push(momentRangeData[i])
                        }
                    }
                    momentRangeData = {};
                },
                success: function(layero, index){
                    setRange(title)
                }
            });
        }

        //设定零售价
        var momentPriceData = {};//暂时存储价格信息
        function openZeroPrice(type) {
            type = type?type:1;
            layer.open({
                type: 1,shade: 0.01,
                skin: 'layui-layer-yj layui-layer-add-goods layui-layer-view-price', //样式类名
                anim: 0,
                area:['720px','560px'],
                closeBtn: 0, //不显示关闭按钮
                resize:false,
                shadeClose: true, //开启遮罩关闭
                content: $('.content-view-price'),
                btn: ['取消','保存'],
                yes: function(index, layero){
                    layer.close(index)
                },
                btn2: function(){
                    params[cid].skuJson = [];
                    for(var i in momentPriceData){
                        if(momentPriceData[i]){
                            params[cid].skuJson.push(momentPriceData[i])
                        }
                    }
                    momentPriceData = {};
                },
                success: function(layero, index){
                    $('.layui-layer-view-price .layui-layer-content').height(560-42+'px')
                    $('.layui-layer-view-price .layui-layer-btn').append('<div class="view-price-add"><input class="yj-input" placeholder="输入数量" type="number"><button class="btn btn-primary">键入</button></div>')
                    setPrice(type)
                }
            });
        }
        //设置预警库存
        function openRedTip() {
            layer.open({
                type: 1,shade: 0.01,title:"设置预警库存",
                skin: 'layui-layer-yj layui-layer-yujing', //样式类名
                anim: 0,
                area:['360px','188px'],
                closeBtn: 0, //不显示关闭按钮
                resize:false,
                shadeClose: true, //开启遮罩关闭
                content: $('.content-view-yujing'),
                btn: ['取消','确定'],
                yes: function(index, layero){
                    layer.close(index)
                },
                btn2: function(){
                    return false;
                },
                success: function(layero, index){

                }
            });
        }
        //设定提成
        function openSettingTicheng() {
            layer.open({
                type: 1,shade: 0.01,title:'设定提成',
                skin: 'layui-layer-yj layui-layer-ticheng', //样式类名
                anim: 0,
                area:['360px','auto'],
                closeBtn: 0, //不显示关闭按钮
                resize:false,
                shadeClose: true, //开启遮罩关闭
                content: $('.content-view-ticheng'),
                btn: ['取消','确定'],
                yes: function(index, layero){
                    layer.close(index)
                },
                btn2: function(){
                    return false;
                },
                success: function(layero, index){

                }
            });
        }
        //初始化范围表格
        function setRange(title) {
            if(params[cid] && params[cid].productCustomRangeList){
                for(var i=0;i<params[cid].productCustomRangeList.length;i++){
                    momentRangeData[params[cid].productCustomRangeList[i].ballId+''+params[cid].productCustomRangeList[i].columnId] = params[cid].productCustomRangeList[i];
                }
            }
            var cols = [];//球
            var rangeData = [];//柱
            cols.push({field:'num', minWidth:60,align:'center', title: '<div class="yj-layui-table-header"><span>球</span><span>柱</span></div>', fixed: 'left'})
            for(var i=0;i<ballData.length;i++){
                (function (i) {
                    cols.push({field:'', minWidth:60,align:'center', title: ballData[i].content, id:ballData[i].id, event: 'setSign',unresize:true,templet:function (d) {
                            if(momentRangeData[ballData[i].id+''+d.id]){
                                return '<div class="active"></div>'
                            }else{
                                return '<div></div>'
                            }
                        }})
                })(i)
            }
            for(var i=0;i<columnData.length;i++){
                rangeData.push({num:columnData[i].content,id:columnData[i].id})
            }
            layui.use('table', function(){
                var table = layui.table;
                table.render({
                    elem: '#rangeEvent'
                    ,data:rangeData
                    ,width: 688
                    ,height: 416
                    ,unresize:true
                    ,cols: [cols]
                });
                //监听单元格事件
                table.on('tool(rangeEvent)', function(obj){
                    if(title=='现货'){
                        $(this).find('div').toggleClass('active')
                    }else if(title=='定制'){
                        if(obj.event === 'setSign'){
                            if($(this).find('div').hasClass('active')){
                                momentRangeData[ballData[$(this).index()-1].id+''+obj.data.id] = '';
                            }else{
                                momentRangeData[ballData[$(this).index()-1].id+''+obj.data.id] = {ballId:ballData[$(this).index()-1].id,columnId:obj.data.id}
                            }
                            $(this).find('div').toggleClass('active')
                        }
                    }
                });
            });
        }
        //初始化价格表格 type  1产品编码   2零售价  3批发价  4备货量   5积分价
        function setPrice(type) {
            if(params[cid].type==0){
                $('#setPriceBtn li').eq(4).hide().siblings().show();
            }else{
                $('#setPriceBtn li').hide()
                $('#setPriceBtn li').eq(0).show();
                $('#setPriceBtn li').eq(4).show();
            }
            var cols = [];//球
            var rangeData = [];//柱
            cols.push({field:'num', minWidth:60, title: '<div class="yj-layui-table-header"><span>球</span><span>柱</span></div>', fixed: 'left'})
            if(type==1){
                if(params[cid] && params[cid].skuJson.length){
                    for(var i=0;i<params[cid].skuJson.length;i++){
                        momentPriceData[params[cid].skuJson[i].properties.ballId+''+params[cid].skuJson[i].properties.columnId] = params[cid].skuJson[i];
                    }
                }
                for(var i=0;i<ballData.length;i++){
                    (function (i) {
                        cols.push({field:'', minWidth:60, title: ballData[i].content, edit:'text',unresize:true,templet:function (d) {
                                if(momentPriceData[ballData[i].id+''+d.id]){
                                    return momentPriceData[ballData[i].id+''+d.id].code
                                }else{
                                    return ''
                                }
                            }})
                    })(i)
                }
                $('#setPriceBtn li').eq(type-1).addClass('active').siblings().removeClass('active');
            }else{
                if(quakooUtils.isNotBlack(momentPriceData)){
                    $('#setPriceBtn li').eq(type-1).addClass('active').siblings().removeClass('active');
                    for(var i=0;i<ballData.length;i++){
                        (function (i) {
                            cols.push({field: '', minWidth: 60, title: ballData[i].content, edit: 'text', unresize: true,
                                templet: function (d) {
                                    if(type==2) {
                                        if (momentPriceData[ballData[i].id + '' + d.id] && momentPriceData[ballData[i].id + '' + d.id].retailPrice!=undefined) {
                                            return momentPriceData[ballData[i].id + '' + d.id].retailPrice
                                        } else {
                                            return ''
                                        }
                                    }else if(type==3){
                                        if (momentPriceData[ballData[i].id + '' + d.id] && momentPriceData[ballData[i].id + '' + d.id].costPrice!=undefined) {
                                            return momentPriceData[ballData[i].id + '' + d.id].costPrice
                                        } else {
                                            return ''
                                        }
                                    }else if(type==4){
                                        if (momentPriceData[ballData[i].id + '' + d.id] && momentPriceData[ballData[i].id + '' + d.id].num) {
                                            return momentPriceData[ballData[i].id + '' + d.id].num
                                        } else {
                                            return ''
                                        }
                                    }else if(type==5){
                                        if (momentPriceData[ballData[i].id + '' + d.id] && momentPriceData[ballData[i].id + '' + d.id].integralPrice) {
                                            return momentPriceData[ballData[i].id + '' + d.id].integralPrice
                                        } else {
                                            return ''
                                        }
                                    }
                                }
                            })
                        })(i)
                    }
                }else{
                    layer.msg('请先设置产品编码');
                    setPrice(1)
                    return
                }
            }
            for(var i=0;i<columnData.length;i++){
                rangeData.push({num:columnData[i].content,id:columnData[i].id})
            }
            layui.use('table', function(){
                var table = layui.table;
                table.render({
                    elem: '#priceEvent'
                    ,data:rangeData
                    ,width: 688
                    ,height: 416
                    ,limit:40
                    ,unresize:true
                    ,cols: [cols]
                });
                //监听单元格事件
                table.on('edit(priceEvent)', function (obj) { //注：edit是固定事件名，test是table原始容器的属性 lay-filter="对应的值"
                    if(type==1){
                        var param = {};
                        param.properties = {};
                        param.properties[ballData[0].pnid] = ballData[obj.field-1].content;
                        param.properties[columnData[0].pnid] = obj.data.num;
                        param.properties.ballId = ballData[obj.field-1].id;
                        param.properties.columnId = obj.data.id;
                        if(!quakooUtils.isNum(obj.value)){
                            layer.msg('产品编码必须为数字');
                            this.value = '';
                            return
                        }
                        param.code = obj.value;
                        momentPriceData[ballData[obj.field-1].id+''+obj.data.id] = param;
                    }else if(type==2){
                        if(momentPriceData[ballData[obj.field-1].id+''+obj.data.id] && momentPriceData[ballData[obj.field-1].id+''+obj.data.id].code){
                            if(!quakooUtils.isNum(obj.value)){
                                layer.msg('零售价必须为数字');
                                this.value = '';
                                return
                            }
                            momentPriceData[ballData[obj.field-1].id+''+obj.data.id].retailPrice = obj.value
                        }else{
                            layer.msg('请先设置该球柱的产品编码')
                            this.value = ''
                            return
                        }
                    }else if(type==3){
                        if(momentPriceData[ballData[obj.field-1].id+''+obj.data.id] && momentPriceData[ballData[obj.field-1].id+''+obj.data.id].code){
                            if(!quakooUtils.isNum(obj.value)){
                                layer.msg('批发价必须为数字');
                                this.value = '';
                                return
                            }
                            momentPriceData[ballData[obj.field-1].id+''+obj.data.id].costPrice = obj.value
                        }else{
                            layer.msg('请先设置该球柱的产品编码')
                            this.value = ''
                            return
                        }
                    }else if(type==4){
                        if(momentPriceData[ballData[obj.field-1].id+''+obj.data.id] && momentPriceData[ballData[obj.field-1].id+''+obj.data.id].code){
                            if(!quakooUtils.isNum(obj.value)){
                                layer.msg('备货量必须为数字');
                                this.value = '';
                                return
                            }
                            momentPriceData[ballData[obj.field-1].id+''+obj.data.id].num = obj.value
                        }else{
                            layer.msg('请先设置该球柱的产品编码')
                            this.value = ''
                            return
                        }
                    }else if(type==5){
                        if(momentPriceData[ballData[obj.field-1].id+''+obj.data.id] && momentPriceData[ballData[obj.field-1].id+''+obj.data.id].code){
                            if(!quakooUtils.isNum(obj.value)){
                                layer.msg('积分价必须为数字');
                                this.value = '';
                                return
                            }
                            momentPriceData[ballData[obj.field-1].id+''+obj.data.id].integralPrice = obj.value
                        }else{
                            layer.msg('请先设置该球柱的产品编码')
                            this.value = ''
                            return
                        }
                    }

                    // console.log(obj.value); //得到修改后的值
                    // console.log(obj.field); //当前编辑的字段名
                    // console.log(obj.data); //所在行的所有相关数据
                });
            });

        }
        //打开库存详情弹窗
        function openNumInfo() {
            layer.open({
                type: 1,shade: 0.01,
                skin: 'layui-layer-yj layui-layer-add-goods layui-layer-view-price', //样式类名
                anim: 0,
                area:['720px','560px'],
                closeBtn: 0, //不显示关闭按钮
                resize:false,
                shadeClose: true, //开启遮罩关闭
                content: $('.content-view-numInfo'),
                btn: ['关闭窗口','打印条码'],
                yes: function(index, layero){
                    layer.close(index)
                },
                btn2:function(){

                },
                success: function(layero, index){
                    $('.layui-layer-view-price .layui-layer-content').height(560-42+'px')
                    setNumInfo(1)
                }
            });
        }
        var numInfoColumn = [
            {checkbox: true, valign:"middle"},
            {field: "id", title: "商品编码", valign:"middle",formatter: function (value, row, index) {
                    return '298183848318';
                }},
            {field: "", title: "球镜度数", valign:"middle",formatter: function (value, row, index) {
                    return '+0.00';
                }
            },
            {field: "", title: "柱镜度数", valign:"middle",formatter: function (value, row, index) {
                    return '-0.50';
                }
            },
            {field: "", title: "数量", valign:"middle",formatter: function (value, row, index) {
                    return '100';
                }
            },
            {field: "", title: "打印条码数量", valign:"middle",formatter: function (value, row, index) {
                    return '<input type="text" placeholder="数量"/>';
                }
            }
        ];
        //打开库存详情表格
        function setNumInfo(type) {
            if(type==1){
                var cols = [];//球
                var rangeData = [];//柱
                cols.push({field:'num', minWidth:60, title: '<div class="yj-layui-table-header"><span>球</span><span>柱</span></div>', fixed: 'left'})
                if(params[cid] && params[cid].skuJson){
                    for(var i=0;i<params[cid].skuJson.length;i++){
                        momentPriceData[params[cid].skuJson[i].properties[0].ballId+''+params[cid].skuJson[i].properties[0].columnId] = params[cid].skuJson[i];
                    }
                }
                for(var i=0;i<ballData.length;i++){
                    (function (i) {
                        cols.push({field:'', minWidth:60, title: ballData[i].content,unresize:true,templet:function (d) {
                                if(momentPriceData[ballData[i].id+''+d.id]){
                                    return momentPriceData[ballData[i].id+''+d.id].retailPrice
                                }else{
                                    return ''
                                }
                            }})
                    })(i)
                }
                for(var i=0;i<columnData.length;i++){
                    rangeData.push({num:columnData[i].content,id:columnData[i].id})
                }
                layui.use('table', function(){
                    var table = layui.table;
                    table.render({
                        elem: '#numInfoEvent'
                        ,data:rangeData
                        ,width: 688
                        ,height: 416
                        ,limit:40
                        ,unresize:true
                        ,cols: [cols]
                    });
                });
            }else if(type==2){
                var table = $('#numInfoTable');
                table.bootstrapTable('destroy')
                table.bootstrapTable({
                    url:config.getUrl_product_getSPUPager(),
                    classes:"table",
                    pagination:true,        //是否显示分页
                    sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
                    pageNumber:1,                       //初始化加载第一页，默认第一页
                    pageSize: 10,
                    pageList: [5, 10, 15, 20],
                    sortable: false,
                    sortOrder: "asc",
                    showColumns: true,
                    strictSearch: true,
                    locale: "zh-CN",
                    paginationHAlign:"center",
                    clickToSelect:true,
                    paginationLoop:false,
                    columns:numInfoColumn,
                    queryParams:function (param) {
                        if(cid){param.cid = cid;}
                        if(bid){param.bid = bid;}
                        if(pid){param.pid = pid;}
                        if(sid){param.sid = sid;}
                        if(name){param.name = name;}
                        if(saleStatus){param.saleStatus = saleStatus;}
                        param.subid = quakooUser.getUserInfo().psid;
                        param.token = quakooUser.getUserInfo().token;
                        return param
                    }
                });
            }
            $('.title-num-info-right div').eq(type-1).addClass('active').siblings().removeClass('active');
            $('.numInfoBox').eq(type-1).show().siblings().hide();
        }
        // 新增眼镜
        function addYjGoods() {
            for(var i=0;i<params[cid].skuJson.length;i++){
                var obj = {};
                for(var j in params[cid].skuJson[i].properties){
                    if(j!='ballId' && j!='columnId'){
                        obj[j] = params[cid].skuJson[i].properties[j]
                    }
                }
                params[cid].skuJson[i].properties = obj;
            }

            params[cid].skuJson = JSON.stringify(params[cid].skuJson);
            params[cid].ugDiscount = JSON.stringify(params[cid].ugDiscount);

            params[cid].productCustomRangeList = JSON.stringify(params[cid].productCustomRangeList);
            console.log(params[cid])
            quakooData.ajaxGetData(config.getUrl_product_add(),params[cid],function (ret) {
                console.log(ret)
                if(ret.success){
                    layer.msg('添加成功',{icon: 1})
                    chooseGoodsType();
                }else{
                    layer.msg(ret.data,{icon: 2})
                }
            })
        }
        //特殊商品添加主图
        function uploadTsspIcon() {
            quakooImg.open(function (data) {
                var obj = quakooImg.processImg(data.ok,60,60)
                $('#cover').attr('src',obj.url)
                $('#cover').attr('real-src',data.ok)
                $('#cover')[0].style.cssText = obj.style;
                $('#cover').parent().show();
            })
        }
    </script>
</body>
</html>