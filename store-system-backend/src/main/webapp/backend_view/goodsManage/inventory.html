<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <title>盘点</title>
    <link href="../resource/layui/css/layui.css" rel="stylesheet">
    <link href="../resource/css/reset.css" rel="stylesheet">
    <link href="../resource/css/bootstrap.min.css" rel="stylesheet">
    <link href="../resource/js/plugins/bootstarp-table/css/bootstrap-table.min.css" rel="stylesheet">
    <link href="../resource/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
    <link href="../resource/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="../resource/css/animate.css" rel="stylesheet">
    <link href="../resource/css/style.css" rel="stylesheet">
    <link href="../resource/css/common.css" rel="stylesheet">
    <link rel="stylesheet" href="../resource/fonts/iconfont.css">
    <link rel="stylesheet" href="../resource/css/yanjing/goodsManage.css">
    <link rel="stylesheet" href="../resource/css/yanjing/inventory.css">
</head>
<body>
<div class="inventory_cont">
    <div class="header">
      <span>
        <i class="icon iconfont icon-ico_inventory_filled"></i>
      </span>
        <span>商品盘点</span>
        <span onclick="newInventory()">新增盘点</span>
    </div>
    <div class="filter">
        <div class="cont">
            <div class="yj-demo-time" id="select-date">
                <div class="yj-date">
                    <span>开始时间-结束时间</span><i class="iconfont icon-ico_calendar"></i>
                </div>
            </div>
        </div>
    </div>
    <div class="mainCont clearfix goods-body">
        <ul class="wrap90 contUl clearfix" id="showUl">
            <!--<li class="item">
              <div class="head">
                <span>等待盘点的任务</span>
                <span>发起人:<em>总仓</em></span>
              </div>
              <div class="body">
                <div class="top">
                  <ul>
                    <li>
                      <span class="txtOverflow">HYDRON海昌透明黑色单片年抛</span>
                      <span>X10</span>
                    </li>
                    <li>
                      <span class="txtOverflow">HYDRON海昌透明黑色单片年抛</span>
                      <span>X20</span>
                    </li>
                    <li>
                      <span class="txtOverflow">HYDRON海昌透明黑色单片年抛</span>
                      <span>X200</span>
                    </li>
                    <li>
                      <span class="txtOverflow">商品A</span>
                      <span>-20</span>
                    </li>
                    <li>
                      <span class="txtOverflow">商品B</span>
                      <span>+9</span>
                    </li>
                  </ul>
                </div>
                <div class="bottom">
                  <div>共15种商品</div>
                  <div>数量总计:100</div>
                </div>
              </div>
              <div class="foot">
                <span class="txt">2018.01.21<em>18:49:57</em></span>
                <span class="btn red" onclick="startInvent()">开始盘点</span>
              </div>
            </li>-->
        </ul>
        <table id="yj-table" data-toggle="table" class="table table-border"></table>

    </div>
</div>
<!--新增盘点弹窗-->
<div class="content-view content-view-commonInventory content-view-addInventory clearfix" id="addDom">

</div>
<!--确认盘点弹窗-->
<div class="content-view content-view-addSuccess">
    <p>是否立即进行盘点?</p>
</div>
<!--开始盘点-->
<div class="content-view content-view-commonInventory content-view-startInvent clearfix">
    <!--左边-->
    <div class="leftBox">
        <div class="head">
            <span class="title layui-layer-title">盘点单</span>
            <div class="selectBox" id="perSelect01">
                <div class="select-box-header">
                    <span class="text">马化腾</span> <i class="iconfont icon-ico_arrow_down"></i>
                </div>
                <div class="optionBox">
                    <ul class="optionUL">
                        <li value="01">发</li>
                        <li value="02">发起</li>
                        <li value="03">发起人</li>
                        <li value="04">发起人一</li>
                        <li value="05">发起人二</li>
                    </ul>
                </div>
            </div>
            <span class="person">盘点人:</span>
        </div>
        <div class="body">
            <ul class="contUl">
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em>盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="blue">盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em>盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="blue">盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em>盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="blue">盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em>盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="blue">盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em>盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="blue">盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em>盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="blue">盘点</em></span>
                            </li>
                            <li>
                                <span class="iconClick"><i class="icon iconfont icon-ico_check"></i>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
        <div class="foot">
            <a class="layui-layer-btn0">关闭窗口</a>
            <span class="btn01">完成盘点</span>
            <span class="btn02">打印盘点单</span>
            <span class="btn03">删除盘点</span>
        </div>
    </div>
    <!--右边-->
    <div class="rightBox">
        <div class="head">
            <span class="title">镜片</span>
            <span class="subTitle">品牌A系列Z</span>
            <input type="number" placeholder="输入条码">
        </div>
        <div class="body">
            <div class="tableCont tablejp">
                <table data-toggle="table"></table>
            </div>
            <div class="tableCont tablejj">
                <table data-toggle="table"></table>
            </div>
            <div class="tableCont tableyx">
                <table data-toggle="table"></table>
            </div>
            <div class="tableCont tablehl">
                <table data-toggle="table"></table>
            </div>
            <div class="tableCont tableqt">
                <table data-toggle="table"></table>
            </div>
        </div>
        <div class="foot">
            <a class="layui-layer-btn1 cannotCreat">保存</a>
        </div>
    </div>
</div>
<!--查看不可盘点弹窗-->
<div class="content-view content-view-commonInventory content-view-checkInvent clearfix">
    <!--左边-->
    <div class="leftBox">
        <div class="head">
            <span class="title layui-layer-title">盘点单</span>
            <span class="person">盘点人:某某某</span>
        </div>
        <div class="body">
            <ul class="contUl">
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="item">
                    <div class="title">镜片</div>
                    <div class="box">
                        <div class="top">
                            <span>品牌·系列</span>
                            <span>当前</span>
                            <span>实际</span>
                            <span>差异</span>
                            <span>操作</span>
                        </div>
                        <ul>
                            <li>
                                <span>品牌A系列A</span>
                                <span>12</span>
                                <span>4423</span>
                                <span>3466</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                            <li>
                                <span>品牌A系列A</span>
                                <span>22</span>
                                <span>5</span>
                                <span>6</span>
                                <span><em class="white">盘点</em></span>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>
        <div class="foot">
            <a class="layui-layer-btn0">关闭窗口</a>
        </div>
    </div>
    <!--右边-->
    <div class="rightBox">
        <div class="head">
            <span class="title">镜片</span>
            <span class="subTitle">品牌A系列Z</span>
        </div>
        <div class="body">

        </div>
        <div class="foot">

        </div>
    </div>
</div>
<!--全局js-->
<script src="../resource/js/jquery.min.js"></script>
<script src="../resource/js/bootstrap.js?v=3.3.6"></script>
<script src="../resource/js/plugins/bootstarp-table/js/bootstrap-table.js"></script>
<script src="../resource/js/plugins/bootstarp-table/js/bootstrap-table-zh-CN.min.js"></script>
<script src="../resource/js/plugins/layer/layer.js"></script>
<script src="../resource/layui/layui.js"></script>


<script src="../resource/js/lib/quakooLib/QuakooBase-1.0.0.js"></script>
<script src="../resource/js/lib/quakooLib/QuakooConfig-1.0.0.js"></script>
<script src="../resource/js/lib/quakooLib/QuakooBasePc-1.0.0.js"></script>
<script src="../resource/js/lib/quakoo/Config.js"></script>
<script src="../resource/js/lib/quakoo/project.js"></script>
<script src="../resource/common/common.js?" +Math.random()></script>
<script src="../resource/js/yanjing.js"></script>
<!--//日期范围插件开始-->
<script src="../resource/js/yanjing/daterange.js"></script>
<script src="../resource/js/template-native.js"></script>

<script type="text/html" id="selectTagTmp">
    <div class="select-box-header">
        <span class="text"><%=title%></span> <i class="iconfont icon-ico_arrow_down"></i>
    </div>
    <div class="optionBox">
        <ul class="optionUL">
            <%for(var i=0;i< list.length;i++){%>
            <li value="<%=list[i].id%>" data-pnid="<%if(list[i].pnid){%><%=list[i].pnid%><%}%>">
                <%if(list[i].name){%><%=list[i].name%><%}else{%><%=list[i].content%><%}%>
            </li>
            <%}%>
        </ul>
    </div>
</script>
<script type="text/html" id="addTmp">
    <!--左边-->
    <div class="leftBox">
        <div class="head">
            <span class="title layui-layer-title">添加盘点</span>
            <div class="selectShop">
                <div id="box001">门店(多选)<i class="icon iconfont icon-ico_arrow_down"></i></div>
                <div id="selectBox001">
                    <ul>
                        <%for(var i=0;i< shopData.length;i++){%>
                        <li>
                            <form class="layui-form">
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <input type="checkbox" value="<%=shopData[i].id%>" name="like1[write]" lay-skin="primary"
                                               lay-filter="shop" title="<%=shopData[i].name%>">
                                    </div>
                                </div>
                            </form>
                        </li>
                        <%}%>
                    </ul>
                </div>
            </div>
        </div>
        <div class="body">
            <ul class="contUl">
                <%for(var i=0;i< categoryData.length;i++){%>
                <li class="item clearfix">
                    <div class="title"><%=categoryData[i].name%></div>
                    <div class="cont">
                        <div class="selectBox" id='yj-brand<%=categoryData[i].id%>'>
                            <div class="select-box-header"><span class="text">品牌</span> <i class="iconfont icon-ico_arrow_down"></i></div>
                            <div class="optionBox">
                                <ul class="optionUL">
                                    <%for(var j=0;j< brandData.length;j++){%>
                                    <li class="txtOverflow" value="<%=brandData[j].id%>"><%=brandData[j].name%></li>
                                    <%}%>
                                </ul>
                            </div>
                        </div>
                        <div class="selectBox" >

                        </div>
                        <div class="selectBox" id='yj-provider<%=categoryData[i].id%>'>
                            <div class="select-box-header"><span class="text">供应商</span> <i class="iconfont icon-ico_arrow_down"></i></div>
                            <div class="optionBox">
                                <ul class="optionUL">
                                    <%for(var j=0;j< providerData.length;j++){%>
                                    <li class="txtOverflow" value="<%=providerData[j].id%>"><%=providerData[j].name%></li>
                                    <%}%>
                                </ul>
                            </div>
                        </div>
                        <div class="selectBox" id='yj-type<%=categoryData[i].id%>'>
                            <div class="select-box-header"><span class="text">商品类型</span> <i class="iconfont icon-ico_arrow_down"></i></div>
                            <div class="optionBox">
                                <ul class="optionUL">
                                    <li class="txtOverflow" value="0">常规商品</li>
                                    <li class="txtOverflow" value="1">积分商品</li>
                                </ul>
                            </div>
                        </div>
                        <div class="btn btn-info" onclick="addToList('<%=categoryData[i].id%>')">添加至盘点单</div>
                    </div>
                </li>
                <%}%>
            </ul>
        </div>
        <div class="foot">
            <a class="layui-layer-btn0">关闭窗口</a>
        </div>
    </div>
    <!--右边-->
    <div class="rightBox">
        <div class="head">
            <span class="title">盘点单</span>
            <div class="selectBox" id="yj-people">
                <div class="select-box-header">
                    <span class="text">发起人</span> <i class="iconfont icon-ico_arrow_down"></i>
                </div>
                <div class="optionBox">
                    <ul class="optionUL">
                        <%for(var i=0;i< peopleData.length;i++){%>
                        <li value="<%=peopleData[i].id%>"><%=peopleData[i].name%></li>
                        <%}%>
                    </ul>
                </div>
            </div>
            <span class="person">发起人:</span>
        </div>
        <div class="body">
            <ul class="contUl" id="outListDom">


            </ul>
        </div>
        <div class="foot">
            <a class="layui-layer-btn1">创建盘点</a>
        </div>
    </div>
</script>
<script type="text/html" id="dataTmp">
    <%for(var i=0;i< list.length;i++){%>
    <li class="item">
        <div class="head">
            <span class="mainCont-head-left blue"><em></em>常规出库</span>
            <span>发起人:<em><%=list[i].outUserName%></em></span>
        </div>
        <div class="body">
            <div class="top">
                <ul>
                    <%if(list[i].clientItems.length>5){%>
                    <%for(var j=0;j< list[i].clientItems.length;j++){%>
                    <%if(j< 4 ){%>
                    <li>
                        <span class="txtOverflow"><%=list[i].clientItems[j].seriesName%><%=list[i].clientItems[j].code%></span>
                        <span>X<%=list[i].clientItems[j].num%></span>
                    </li>
                    <%}%>
                    <%}%>
                    <li style="color:#828297">
                        ...
                    </li>
                    <%}else{%>
                    <%for(var j=0;j< list[i].clientItems.length;j++){%>
                    <li>
                        <span class="txtOverflow"><%=list[i].clientItems[j].seriesName%><%=list[i].clientItems[j].code%></span>
                        <span>X<%=list[i].clientItems[j].num%></span>
                    </li>
                    <%}%>
                    <%}%>
                </ul>
            </div>
            <div class="bottom">
                <div>共<%=list[i].clientItems.length%>种商品</div>
                <div>数量总计:<%=list[i].clientItemsNum%></div>
            </div>
        </div>
        <div class="foot">
            <span class="txt"><%=list[i].time%></span>
            <%if(list[i].status==0){%>
            <button class="btn btn-primary">编辑</button>
            <%}else if(list[i].status==1){%>
            <button class="btn btn-danger">等待确认</button>
            <%}else if(list[i].status==2){%>
            <button class="btn btn-order">查看</button>
            <%}%>
        </div>
    </li>
    <%}%>
</script>
<script type="text/html" id="outListTmp">
    <%for(var i in list){%>
    <%if(list[i].data){%>
    <li class="yanjing item" style="">
        <div class="title"><%=list[i].name%></div>
        <div class="box">
            <div class="top">
                <span>品牌·系列</span>
                <span>产品编码</span>
                <span>当前库存</span>
                <span>操作</span>
            </div>
            <ul>
                <%for(var j in list[i].data){%>
                <li class="clearfix">
                    <span><%=list[i].data[j].brandName%>·<%=list[i].data[j].seriesName%></span>
                    <span><%=list[i].data[j].p_code%></span>
                    <span><%=list[i].data[j].num%></span>
                    <span class="removeLi" onclick="removeOutLi('<%=i%>','<%=j%>')">移除</span>
                </li>
                <%}%>
            </ul>
        </div>
    </li>
    <%}%>
    <%}%>
</script>

<!--//日期范围插件结束-->
<script>
    var subid = quakooUser.getUserInfo().psid;//企业/公司id
    var shopId = quakooDb.getItem('sel_ShopId');//门店id

    var allData = {};//页面请求回来的所有数据

    var startTime;//筛选时间开始时间
    var endTime;//筛选时间结束时间


    var categoryData = [];//一级类目数据
    var brandData = [];//品牌数据
    var providerData = [];//供应商数据
    var ballData = [];//球数据
    var columnData = [];//柱数据
    var peopleData = [];//员工数据
    var allOutList = {};//全部数据
    var shopData;//门店数据
    var peopleId;//发起人
    var subidsArr = [];//门店id集合

    //获取一级类目
    quakooData.ajaxGetData(config.getUrl_productCategory_getSubAllList(),{subid:subid},function (ret) {
        if(ret && ret.success){
            categoryData = ret.data;
        }
    })
    //获取品牌数据
    quakooData.ajaxGetData(config.getUrl_productBrand_getSubAllList(),{subid:subid},function (ret) {
        if(ret && ret.success){
            brandData = ret.data;
        }
    })
    //获取属性-球
    quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:15},function (ret) {
        if(ret && ret.success){
            ballData = ret.data.sort(function (a,b) {
                return b.content-a.content;
            });
        }
    })
    //获取供应商
    quakooData.ajaxGetData(config.getUrl_productProvider_getSubAllList(),{subid:subid},function (ret) {
        if(ret && ret.success){
            providerData = ret.data;
        }
    })
    //获取属性-柱
    quakooData.ajaxGetData(config.getUrl_productPropertyvalue_getAllList(),{pnid:16},function (ret) {
        if(ret && ret.success){
            columnData = ret.data.sort(function (a,b) {
                return b.content-a.content;
            });
        }
    })
    //获取门店所有顾客-不分页
    quakooData.ajaxGetData(config.getUrl_user_getAllUser(),{sid:shopId,userType:1},function (ret) {
        if(ret && ret.success){
            peopleData = ret.data;
        }
    })
    //获取当前企业下门店列表
    quakooData.ajaxGetData(config.getUrl_subordinate_getSubordinateStore(),{sid:subid},function (ret) {
        if(ret&&ret.success){
            if(quakooUtils.isNotBlack(ret.data)){
                shopData = ret.data;
            }
        }
    });

    //日期范围初始化
    var selectDate = new dateRange("#select-date");
    selectDate.init()
    $('#select-date button').click(function () {
        startTime = selectDate.getTime()[2];
        endTime = selectDate.getTime()[3];
        getData()
    })


    //获取盘点数据
    getData()
    //盘点列表
    function getData(){
        $("#yj-table").bootstrapTable('destroy');
        $("#yj-table").bootstrapTable({
            url: config.getUrl_inventoryCheckBill_getCreatePager(),
            classes: "table",
            pagination: true,        //是否显示分页
            sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
            pageNumber: 1,                       //初始化加载第一页，默认第一页
            pageSize: 6,
            pageList: [6, 12, 18],
            sortable: false,
            sortOrder: "asc",
            showColumns: true,
            strictSearch: true,
            locale: "zh-CN",
            paginationHAlign: "center",
            clickToSelect: true,
            // paginationLoop:false,        //分页是否可以循环
            columns: [],
            queryParams:function (param) {
                param.subid = shopId;
                param.token = quakooUser.getUserInfo().token;
                if(startTime){
                    param.startTime=startTime;
                }
                if(endTime){
                    param.endTime=endTime;
                }
                return param
            },
            onPreBody: function (data) {
                console.log(data)
                var arr = [];
                for (var i = (this.pageNumber - 1) * this.pageSize; i < this.pageNumber * this.pageSize; i++) {
                    if(this.data[i]){
                        this.data[i].time = quakooUtils.formatTimeToDateDian(this.data[i].ctime);
                        this.data[i].clientItemsNum = 0;
                        for(var j=0;j<this.data[i].clientItems.length;j++){
                            this.data[i].clientItemsNum +=this.data[i].clientItems[j].num;
                        }
                        arr.push(this.data[i])
                        allData[this.data[i].id] = this.data[i]
                    }
                }
                var html = template('dataTmp',{list:arr})
                $("#showUl").html(html);
            }
        });
    }
    //新增盘点弹窗
    function newInventory(id) {
        layer.open({
            type: 1,
            shade: 0.01,
            title: null,
            skin: 'content-view-tan content-view-commonInventory-tan content-view-addInventory', //样式类名
            anim: 0,
            move:'.title',
            area: ['735px', '560px'],
            closeBtn: 0, //不显示关闭按钮
            resize: false,
            shadeClose: true, //开启遮罩关闭
            content: $('.content-view-addInventory'), //容器对象
            btn: null,
            success: function (layero, index) {
                $('.content-view-commonInventory-tan .layui-layer-content').height(560);
                addRepertorySuccess(index,id)
            }
        });
    }
    function addRepertorySuccess(index,id) {
        var html = template('addTmp',{brandData:brandData,peopleData:peopleData,categoryData:categoryData,providerData:providerData,shopData:shopData})
        $('#addDom').html(html);
        $('.content-view-addInventory .layui-layer-btn0').click(function () {
            addOutList(0,index,id);
        });
        $('.content-view-addInventory .layui-layer-btn1').click(function () {
            addOutList(1,index,id);
        });
        for(var i=0;i<categoryData.length;i++){
            (function (i) {
                selectTag($("#yj-brand"+categoryData[i].id),function (ret) {
                    if(ret.value){
                        if(allOutList[categoryData[i].id]){
                            allOutList[categoryData[i].id].bid = ret.value;
                            allOutList[categoryData[i].id].sid = -1;
                        }else{
                            allOutList[categoryData[i].id] = {cid:categoryData[i].id,bid:ret.value,sid:-1,name:categoryData[i].name,data:{}}
                        }
                        $('#yj-brand'+categoryData[i].id).next().html('');
                        //获取品牌下的系列列表
                        quakooData.ajaxGetData(config.getUrl_productSeries_getSubAllList(),{subid:subid,bid:ret.value},function (ret1) {
                            if(ret1 && ret1.success){
                                var html2 = template('selectTagTmp',{title:'系列',list:ret1.data});
                                $('#yj-brand'+categoryData[i].id).next().html(html2).show();
                                selectTag($('#yj-brand'+categoryData[i].id).next(),function (series) {
                                    allOutList[categoryData[i].id].sid = series.value;
                                })
                            }
                        })
                    }
                })
                selectTag($("#yj-provider"+categoryData[i].id),function (ret) {
                    if(ret.value){
                        if(allOutList[categoryData[i].id]){
                            allOutList[categoryData[i].id].pid = ret.value;
                        }else{
                            allOutList[categoryData[i].id] = {cid:categoryData[i].id,pid:ret.value,name:categoryData[i].name,data:{}}
                        }
                    }
                })
                selectTag($("#yj-type"+categoryData[i].id),function (ret) {
                    if(ret.value){
                        if(allOutList[categoryData[i].id]){
                            allOutList[categoryData[i].id].type = ret.value;
                        }else{
                            allOutList[categoryData[i].id] = {cid:categoryData[i].id,type:ret.value,name:categoryData[i].name,data:{}}
                        }
                    }
                })
            })(i)
        }
        //发起人
        selectTag($("#yj-people"), function (ret) {
            peopleId = ret.value;
        })


        layui.use(['form'], function () {
            form = layui.form
            form.on('checkbox(shop)', function (data) {
                if ($(this).prop("checked")) {
                    subidsArr.push($(this).val());
                } else {
                    var index = getIndex(subidsArr, $(this).val())
                    subidsArr.splice(index, 1);
                }
                console.log(subidsArr)
            });
        })

        function getIndex(arr, value) {
            for (var i = 0; i < arr.length; i++) {
                if (arr[i] == value) {
                    return i
                }
            }
        }

        //点击按钮是弹出数组
        $('#box001').click(function (e) {
            quakooUtils.stopEventBubble(e)
            if ($(this).find('.icon').hasClass('icon-ico_arrow_down')) {
                $(this).find('.icon').removeClass('icon-ico_arrow_down').addClass('icon-ico_arrow_up')
            } else {
                $(this).find('.icon').removeClass('icon-ico_arrow_up').addClass('icon-ico_arrow_down')
            }
            if ($('#selectBox001').is(':hidden')) {　　//如果node是隐藏的则显示node元素，否则隐藏
                $('#selectBox001').show(600);
            } else {
                $('#selectBox001').hide(600);
            }
        })
        $('#selectBox001').click(function (e) {
            quakooUtils.stopEventBubble(e)
        })
        $(document).click(function () {
            $("#selectBox001").hide();
            $(this).find('.icon').removeClass('icon-ico_arrow_up').addClass('icon-ico_arrow_down')
        });
    }
    function addToList(id) {
        var param = {};
        if(!allOutList[id] || !allOutList[id].bid){
            layer.msg('请选择品牌');return ;
        }
        if(!allOutList[id].pid){
            layer.msg('请选择供应商');return ;
        }
        if(allOutList[id].type!=0 && allOutList[id].type!=1){
            layer.msg('请选择商品类型');return ;
        }
        param.type = allOutList[id].type;
        param.pid = allOutList[id].pid;
        param.bid = allOutList[id].bid;
        param.sid = allOutList[id].sid;
        param.subid = shopId;
        param.cid = id;
        quakooData.ajaxGetData(config.getUrl_inventoryCheckBill_select(),param,function (ret) {
            if(ret&&ret.success){
                for(var i=0;i<ret.data.details.length;i++){
                    console.log(i)
                    allOutList[id].data[''+allOutList[id].bid+allOutList[id].sid+ret.data.details[i].id] = ret.data.details[i]
                }
                var html = template('outListTmp',{list:allOutList,showTool:true})
                $("#outListDom").html(html)
            }else{
                layer.msg(ret.data,{icon: 2})
            }
        })
    }
    //移除盘点单中的商品
    function removeOutLi(i,j) {
        delete allOutList[i].data[j];
        var html = template('outListTmp',{list:allOutList,showTool:true})
        $("#outListDom").html(html)
    }
    //添加盘点
    function addOutList(status,index,id) {
        if(subidsArr.length<=0){
            layer.msg('选择门店');
            return
        }
        if(!peopleId){
            layer.msg('选择发起人');
            return
        }
        var params = {};
        if(id){
            params.id = id;
            params.wid = allData[id].wid;
        }
        params.subid = shopId;
        params.subids = subidsArr;
        params.status = status;
        params.initUid = peopleId;
        params.createUid = quakooUser.getUserInfo().id;
        params.itemsJson = [];
        for(var i in allOutList){
            if(allOutList[i].data){
                for(var j in allOutList[i].data){
                    var obj = {};
                    if(id){
                        obj.did = allOutList[i].data[j].did;
                    }else{
                        obj.did = allOutList[i].data[j].id;
                    }
                    obj.currentNum = allOutList[i].data[j].num;
                    params.itemsJson.push(obj)
                }
            }
        }
        params.itemsJson = JSON.stringify(params.itemsJson)
        if(id){
            quakooData.ajaxGetData(config.getUrl_inventoryCheckBill_update(),params,function (ret) {
                if(ret && ret.success){
                    layer.msg('修改成功',{icon: 1})
                    layer.close(index)
                    getInData()
                }else{
                    layer.msg(ret.data,{icon: 2})
                }
            })
        }else{
            quakooData.ajaxGetData(config.getUrl_inventoryCheckBill_add(),params,function (ret) {
                if(ret && ret.success){
                    layer.msg('添加成功',{icon: 1})
                    layer.close(index)
                    getInData()
                }else{
                    layer.msg(ret.data,{icon: 2})
                }
            })
        }

    }

    var dataJpTable = [
        {
            "name": "+0.00",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-0.25",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-0.50",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-0.75",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-1.00",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-1.25",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-1.50",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-1.75",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-2.00",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-2.25",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-2.50",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-2.75",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-3.00",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
        {
            "name": "-3.25",
            "col01": "10",
            "col02": "4",
            "col03": "10",
            "col04": "4",
            "col05": "10",
            "col06": "4",
            "col07": "4",
            "col08": "4",
            "col09": "10",
            "col10": "4",
            "col11": "4",
            "col12": "4"
        },
    ]
    var dataJjTable = [
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", 'shiji': '0000', "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
    ]
    var dataYxTable = [
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", 'shiji': '0000', "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
    ]
    var dataHlTable = [
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", 'shiji': '0000', "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "sehao": "色号B", "dangqian": "20", "chayi": "4"},
    ]
    var dataQtTable = [
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", 'shiji': '0000', "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
        {"xinghao": "型号A", "guangdu": "色号B", "dangqian": "20", "chayi": "4"},
    ]
    tableInit();
    //添加商品-左边部分数据
    data01 = [
        {title: '眼镜', id: 'yanjing'},
        {title: '镜片', id: 'jingpian'},
        {title: '镜架', id: 'jingjia'},
        {title: '隐形眼镜', id: 'yinxing'},
        {title: '太阳镜', id: 'taiyang'},
        {title: '护理产品', id: 'huli'},
        {title: '其他产品', id: 'qita'},
        {title: '水杯', id: 'shuibei'}
    ]
    //复选下拉框执行
    mulSelect();
   /* //页面中的select
    selectTag($("#perSelect"), function (ret) {/!*console.log(ret)*!/
    })
    selectTag($("#perSelect01"), function (ret) {/!*console.log(ret)*!/
    })
*/


    //table表格初始化
    function tableInit() {
        $(".tablejp table").bootstrapTable('destroy')
        $(".tablejp table").bootstrapTable({
            data: dataJpTable,
            classes: "table",
            // pagination: true,        //是否显示分页
            pageNumber: 1,                       //初始化加载第一页，默认第一页
            pageSize: 10,
            pageList: [5, 10, 15, 20],
            sortable: false,
            sortOrder: "asc",
            showColumns: true,
            strictSearch: true,
            locale: "zh-CN",
            paginationHAlign: "center",
            clickToSelect: true,
            columns: [
                [
                    {
                        title: "<div><span>柱</span><span class='xiexian'></span><span>球</span></div>",
                        valign: "middle",
                        align: "left",
                        colspan: 1,
                        rowspan: 1
                    },
                    {title: "+0.00", valign: "middle", align: "left", colspan: 2, rowspan: 1},
                    {title: "-0.25", valign: "middle", align: "left", colspan: 2, rowspan: 1},
                    {title: "-0.50", valign: "middle", align: "left", colspan: 2, rowspan: 1},
                    {title: "-0.75", valign: "middle", align: "left", colspan: 2, rowspan: 1},
                    {title: "-1.00", valign: "middle", align: "left", colspan: 2, rowspan: 1},
                    {title: "-1.25", valign: "middle", align: "left", colspan: 2, rowspan: 1},
                ],
                [
                    {field: 'name', title: '库存', valign: "middle", align: "left"},
                    {field: 'col01', title: '原有', valign: "middle", align: "left"},
                    {field: 'col02', title: '现有', valign: "middle", align: "left"},
                    {field: 'col03', title: '原有', valign: "middle", align: "left"},
                    {field: 'col04', title: '现有', valign: "middle", align: "left"},
                    {field: 'col05', title: '原有', valign: "middle", align: "left"},
                    {field: 'col06', title: '现有', valign: "middle", align: "left"},
                    {field: 'col07', title: '原有', valign: "middle", align: "left"},
                    {field: 'col08', title: '现有', valign: "middle", align: "left"},
                    {field: 'col09', title: '原有', valign: "middle", align: "left"},
                    {field: 'col10', title: '现有', valign: "middle", align: "left"},
                    {field: 'col11', title: '原有', valign: "middle", align: "left"},
                    {field: 'col12', title: '现有', valign: "middle", align: "left"},
                ]
            ],
            onPageChange: function (number, size) {

            }
        });
        $(".tablejj table").bootstrapTable({
            data: dataJjTable,
            classes: "table",
            pagination: true,        //是否显示分页
            pageNumber: 1,                       //初始化加载第一页，默认第一页
            pageSize: 10,
            pageList: [5, 10, 15, 20],
            sortable: false,
            sortOrder: "asc",
            showColumns: true,
            strictSearch: true,
            locale: "zh-CN",
            paginationHAlign: "center",
            clickToSelect: true,
            smartDisplay: false,
            columns: [
                {field: "xinghao", title: "型号", align: "left", valign: "middle"},
                {field: "sehao", title: "色号", align: "left", valign: "middle"},
                {field: "dangqian", title: "当前", align: "left", valign: "middle"},
                {
                    field: "shiji", title: "实际", align: "left", valign: "middle",
                    formatter: function (value, row, index) {//循环自定义内容
                        var input = '<input type="number" placeholder="0">'
                        return !value ? input : '<input value=' + value + ' type="number" placeholder="0">'
                    }
                },
                {
                    field: "chayi", title: "差异", align: "left", valign: "middle",
                },
            ],
            onPageChange: function (number, size) {

            }
        });
        $(".tableyx table").bootstrapTable({
            data: dataYxTable,
            classes: "table",
            pagination: true,        //是否显示分页
            pageNumber: 1,                       //初始化加载第一页，默认第一页
            pageSize: 10,
            pageList: [5, 10, 15, 20],
            sortable: false,
            sortOrder: "asc",
            showColumns: true,
            strictSearch: true,
            locale: "zh-CN",
            paginationHAlign: "center",
            clickToSelect: true,
            smartDisplay: false,
            columns: [
                {field: "xinghao", title: "型号", align: "left", valign: "middle"},
                {field: "sehao", title: "色号", align: "left", valign: "middle"},
                {
                    field: "baozhiqi", title: "保质期", align: "left", valign: "middle",
                    formatter: function (value, row, index) {//循环自定义内容
                        return '2018.03.30' + '<br/>' + '2019.03.30'
                    }
                },
                {field: "dangqian", title: "当前", align: "left", valign: "middle"},
                {
                    field: "shiji", title: "实际", align: "left", valign: "middle",
                    formatter: function (value, row, index) {//循环自定义内容
                        var input = '<input type="number" placeholder="0">'
                        return !value ? input : '<input value=' + value + ' type="number" placeholder="0">'
                    }
                },
                {
                    field: "chayi", title: "差异", align: "left", valign: "middle",
                },
            ],
            onPageChange: function (number, size) {

            }
        });
        $(".tablehl table").bootstrapTable({
            data: dataHlTable,
            classes: "table",
            pagination: true,        //是否显示分页
            pageNumber: 1,                       //初始化加载第一页，默认第一页
            pageSize: 10,
            pageList: [5, 10, 15, 20],
            sortable: false,
            sortOrder: "asc",
            showColumns: true,
            strictSearch: true,
            locale: "zh-CN",
            paginationHAlign: "center",
            clickToSelect: true,
            smartDisplay: false,
            columns: [
                {field: "xinghao", title: "型号", align: "left", valign: "middle"},
                {field: "sehao", title: "色号", align: "left", valign: "middle"},
                {
                    field: "baozhiqi", title: "保质期", align: "left", valign: "middle",
                    formatter: function (value, row, index) {//循环自定义内容
                        return '2018.03.30' + '<br/>' + '2019.03.30'
                    }
                },
                {field: "dangqian", title: "当前", align: "left", valign: "middle"},
                {
                    field: "shiji", title: "实际", align: "left", valign: "middle",
                    formatter: function (value, row, index) {//循环自定义内容
                        var input = '<input type="number" placeholder="0">'
                        return !value ? input : '<input value=' + value + ' type="number" placeholder="0">'
                    }
                },
                {
                    field: "chayi", title: "差异", align: "left", valign: "middle",
                },
            ],
            onPageChange: function (number, size) {

            }
        });
        $(".tableqt table").bootstrapTable({
            data: dataQtTable,
            classes: "table",
            pagination: true,        //是否显示分页
            pageNumber: 1,                       //初始化加载第一页，默认第一页
            pageSize: 10,
            pageList: [5, 10, 15, 20],
            sortable: false,
            sortOrder: "asc",
            showColumns: true,
            strictSearch: true,
            locale: "zh-CN",
            paginationHAlign: "center",
            clickToSelect: true,
            smartDisplay: false,
            columns: [
                {field: "xinghao", title: "型号", align: "left", valign: "middle"},
                {field: "guangdu", title: "光度", align: "left", valign: "middle"},
                {field: "dangqian", title: "当前", align: "left", valign: "middle",},
                {
                    field: "shiji", title: "实际", align: "left", valign: "middle",
                    formatter: function (value, row, index) {//循环自定义内容
                        var input = '<input type="number" placeholder="0">'
                        return !value ? input : '<input value=' + value + ' type="number" placeholder="0">'
                    }
                },
                {
                    field: "chayi", title: "差异", align: "left", valign: "middle",
                },
            ],
            onPageChange: function (number, size) {

            }
        });
    }



    //盘点创建成功弹窗
    function addSuccess() {
        layer.open({
            type: 1,
            shade: 0.01,
            title: '创建成功',
            skin: 'content-view-tan', //样式类名
            anim: 0,
            area: ['240px', '130px'],
            closeBtn: 0, //不显示关闭按钮
            resize: false,
            shadeClose: true, //开启遮罩关闭
            content: $('.content-view-addSuccess'), //容器对象
            btn: ['下次再说', '立即盘点'],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                layer.close(index);
            },
            success: function (layero, index) {

            }
        });
    }
    //添加商品-左边部分列表
    function addLeftList() {
        $('.content-view-addInventory .leftBox .contUl').html('')
        for (var i = 0; i < data01.length; i++) {
            var li01 =
                '<li class="item">' +
                '<div class="title">' + data01[i].title + '</div>' +
                '<div class="cont">' +
                '<div class="selectBox" id=' + data01[i].id + '01' + '>' +
                '<div class="select-box-header">' +
                '<span class="text">品牌</span> <i class="iconfont icon-ico_arrow_down"></i>' +
                '</div>' +
                '<div class="optionBox">' +
                '<ul class="optionUL">' +
                '<li class="txtOverflow" value="01">品牌A</li>' +
                '<li class="txtOverflow" value="02">品牌B</li>' +
                '<li class="txtOverflow" value="03">品牌C</li>' +
                '<li class="txtOverflow" value="04">品牌D</li>' +
                '<li class="txtOverflow" value="05">品牌E</li>' +
                '</ul>' +
                '</div>' +
                '</div>' +
                '<div class="selectBox" id=' + data01[i].id + '02' + '>' +
                '<div class="select-box-header">' +
                '<span class="text">系列</span> <i class="iconfont icon-ico_arrow_down"></i>' +
                '</div>' +
                '<div class="optionBox">' +
                '<ul class="optionUL">' +
                '<li class="txtOverflow" value="01">系列A</li>' +
                '<li class="txtOverflow" value="02">系列B</li>' +
                '<li class="txtOverflow" value="03">系列C</li>' +
                '<li class="txtOverflow" value="04">系列D</li>' +
                '<li class="txtOverflow" value="05">系列E</li>' +
                '</ul>' +
                '</div>' +
                '</div>' +
                '<div class="btnGray">添加至盘点单</div>' +
                '</div>' +
                '</li>'
            console.log(li01)
            $('.content-view-addInventory .leftBox .contUl').append(li01);
            //初始化下拉框
            selectTag($('#' + data01[i].id + '01'), function (ret) {
                var txt = ret.el.next().find('.text').text()
                if (txt != '系列') {
                    ret.el.siblings('.btnGray').addClass('canClick')
                }
                $('.canClick').click(function () {
                    // addtoInvent($(this));
                    $('.removeLi').click(function () {
                        $(this).parent().remove()
                    })
                })
            })
            selectTag($('#' + data01[i].id + '02'), function (ret) {
                var txt = ret.el.prev().find('.text').text()
                if (txt != '品牌') {
                    ret.el.siblings('.btnGray').addClass('canClick')
                }
                $('.canClick').click(function () {
                    // addtoInvent($(this));
                    $('.removeLi').click(function () {
                        $(this).parent().remove()
                    })
                })
            })
        }
    }

    //添加商品-右边列表
    function addRightList() {
        for (var i = 0; i < data01.length; i++) {
            var li01 = '<li class="' + data01[i].id + ' ' + 'item' + '" style="display: none">' +
                '<div class="title">' + data01[i].title + '</div>' +
                '<div class="box">' +
                '<div class="top">' +
                '<span>品牌·系列</span>' +
                '<span>当前库存</span>' +
                '<span>操作</span>' +
                '</div>' +
                '<ul>' +
                // '<li>' +
                //   '<span>品牌A系列A</span>' +
                //   '<span>12</span>' +
                //   '<span>移除</span>' +
                // '</li>' +
                // '<li>' +
                //   '<span>品牌A系列A</span>' +
                //   '<span>22</span>' +
                //   '<span>移除</span>' +
                // '</li>' +
                '</ul>' +
                '</div>' +
                '</li>'
            $('.content-view-commonInventory .rightBox .contUl').append(li01);
        }
    }

    //下拉框复选
    function mulSelect() {

    }

    //开始盘点弹窗
    function startInvent() {
        layer.open({
            type: 1,
            shade: 0.01,
            title: null,
            skin: 'content-view-tan content-view-commonInventory-tan content-view-startInvent', //样式类名
            anim: 0,
            area: ['960px', '560px'],
            closeBtn: 0, //不显示关闭按钮
            resize: false,
            shadeClose: true, //开启遮罩关闭
            content: $('.content-view-startInvent'), //容器对象
            btn: [],
            yes: function (index) {

            },
            btn2: function (index) {

            },
            success: function (layero, index) {
                $('.iconClick').click(function () {
                    $(this).toggleClass('checked');
                })
                $('.content-view-commonInventory-tan .layui-layer-content').height(560);

                $('.tablejp').show()
                // $('.tablejj').show()
                // $('.tableyx').show()
                // $('.tablehl').show()
                // $('.tableqt').show()
                //底部按钮点击关闭弹窗
                $('.content-view-startInvent .layui-layer-btn0').click(function () {
                    layer.close(index);
                });
                $('.content-view-startInvent .layui-layer-btn1').click(function () {
                    layer.close(index);
                });
            }
        });
    }

    //查看不可盘点弹窗
    function checkInvent() {
        layer.open({
            type: 1,
            shade: 0.01,
            title: null,
            skin: 'content-view-tan content-view-commonInventory-tan content-view-checkInvent', //样式类名
            anim: 0,
            area: ['960px', '560px'],
            closeBtn: 0, //不显示关闭按钮
            resize: false,
            shadeClose: true, //开启遮罩关闭
            content: $('.content-view-checkInvent'), //容器对象
            btn: [],
            yes: function (index) {

            },
            btn2: function (index) {

            },
            success: function (layero, index) {
                $('.content-view-commonInventory-tan .layui-layer-content').height(560);
                //底部按钮点击关闭弹窗
                $('.content-view-checkInvent .layui-layer-btn0').click(function () {
                    layer.close(index);
                });
            }
        });
    }

    //添加至盘点单(待封装)
    function addtoInvent(el) {
        console.log(el);
        var title = el.parent().siblings('.title').text()
        var arr = []
        var selectTxt = el.siblings('.selectBox')
        for (var i = 0; i < selectTxt.length; i++) {
            var txt = selectTxt.eq(i).find('.text').text()
            arr.push(txt);
        }
        var topTxt = arr[0] + '·' + arr[1];
        var li = '<li>' +
            '<span>' + topTxt + '</span>' +
            '<span>12</span>' +
            '<span class="removeLi">移除</span>' +
            '</li>'
        if (title == '镜片') {
            $('.jingpian').show()
            $('.jingpian ul').append(li);
        } else if (title == '眼镜') {
            $('.yanjing').show()
            $('.yanjing ul').append(li);
        } else if (title == '镜架') {
            $('.jingjia').show()
            $('.jingjia ul').append(li);
        } else if (title == '隐形眼镜') {
            $('.yinxing').show()
            $('.yinxing ul').append(li);
        } else if (title == '护理产品') {
            $('.huli').show()
            $('.huli ul').append(li);
        } else if (title == '水杯') {
            $('.shuibei').show()
            $('.shuibei ul').append(li);
        } else if (title == '其他产品') {
            $('.qita').show()
            $('.qita ul').append(li);
        }
    }
</script>
</body>
</html>