<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <title>查看员工</title>
    <link href="../resource/css/yanjing/mobiscroll.2.13.2.css" rel="stylesheet">
    <link href="../resource/layui/css/layui.css" rel="stylesheet">
    <link href="../resource/css/reset.css" rel="stylesheet">
    <link href="../resource/css/bootstrap.min.css" rel="stylesheet">
    <link href="../resource/js/plugins/bootstarp-table/css/bootstrap-table.min.css" rel="stylesheet">
    <link href="../resource/css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css" rel="stylesheet">
    <link href="../resource/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="../resource/css/animate.css" rel="stylesheet">
    <link href="../resource/css/style.css" rel="stylesheet">
    <link href="../resource/css/common.css" rel="stylesheet">
    <link href="../resource/css/yanjing/myDate.css" rel="stylesheet">
    <link rel="stylesheet" href="../resource/fonts/iconfont.css">
    <link rel="stylesheet" href="../resource/css/common.css">
    <link rel="stylesheet" href="../resource/css/yanjing/companyManage.css">
    <style>
        input {
            background-color: #fff;
        }

        /*时间插件 隐藏时间*/
        .dwcc div.mbsc-w-p:nth-child(2) .dwfl:nth-child(1) {
            display: none;
        }

        html, body {
            touch-action: none;
        }

        /*主要内容*/
        .staffManageCont {
            position: relative;
            min-height: 200px;
            background: #ebebf3;
        }

        /*主要内容头部*/
        .staffManageCont .contHeader {
            width: 100%;
            height: 53px;
            border-bottom: 1px solid #dfdfe9;
            background: #fff;
        }

        /*主要内容头部左边*/
        .staffManageCont .contHeader .headLeft {
            width: 20%;
            line-height: 48px;
            float: left;
            height: 100%;
            color: #393953;
            font-weight: bold;
            margin-left: 24px;
        }

        /*主要内容头部右边*/
        .staffManageCont .contHeader .headRight {
            width: 60%;
            float: right;
            height: 53px;
        }

        .headRight .search-box{
            height:53px;
            line-height: 53px;
            float:right;
            margin-right:12px;
        }

        .headRight .search-box .searchTypeBox {
            display: inline-block;
            height: 28px;
            line-height: 28px;
            vertical-align: middle;
        }

        #searchStaff{
            vertical-align: middle;
        }

        .staffManageCont .contHeader .headRight .child {
            float: right;
            margin: 12px 12px 12px 0;
        }

        .staffManageCont .contHeader .headRight .newShop,
        .staffManageCont .contHeader .headRight .payroll, .download-btn {
            width: auto;
            padding: 0 8px;
            height: 28px;
            line-height: 28px;
            background: #4186DC;
            color: #fff;
            border-radius: 2px;
            text-align: center;
            cursor: pointer;
        }

        .download-btn {
            background: #5bb75b;
        }

        .staffManageCont .contHeader .headRight input {
            width: 128px;
            height: 28px;
            line-height: 28px;
            padding: 0 8px;
            color: #000;
            border-radius: 2px;
            border: 1px solid #ececf4;
        }

        .staffManageCont .contHeader .headRight select {
            width: 68px;
            height: 28px;
            line-height: 28px;
            border-radius: 2px;
            border: 1px solid #ececf4;
            margin-right: 4px !important;
            color: #828297;
        }

        .staffManageCont .contHeader .headRight .payroll {
            background: #57B8DB;
        }

        /*过滤器*/
        .staffManageCont .filter {
            width: 100%;
            height: 32px;
            background: #f3f3f7;
            border-bottom: 1px solid #dfdfe9;
            font-size: 0;
        }

        .staffManageCont .filter .selectBox {
            font-size: 12px;
            height: 100%;
            padding: 0 8px;
            border: 1px solid #dfdfe9;
            color: #828297;
            border-bottom: none;
            border-top: none;
            background: #f3f3f7;
        }

        .staffManageCont .filter .selectBox ul {
            border: 1px solid #dfdfe9;
        }

        /*表格content*/
        .staffManageCont .tableCont {
            border-radius: 2px;
            overflow: hidden;
            padding: 12px 0 50px 0;
        }

        .staffManageCont .tableCont .fixed-table-container {
            border: 1px solid #dfdfe9;
        }

        /*表头*/
        .staffManageCont .tableCont .th-inner {
            color: #828297;
            font-weight: 600;
        }

        /*表格body*/
        .staffManageCont .tableCont tbody tr {
            height: 48px;
        }

        .staffManageCont .tableCont tbody tr td {
            color: #393953;
        }

        /*按钮样式*/
        .staffManageCont .tableCont tbody tr td .btn-status {
            color: #fff;
            height: 28px;
            line-height: 28px;
            margin: 4px;
            cursor: pointer;
        }

        .staffManageCont .tableCont tbody tr td .btn-edit {
            background: #4186DC;
        }

        .staffManageCont .tableCont tbody tr td .btn-salary {
            background: #57B8DB;
        }

        /*开启未开启功能css(可复用)*/
        .staffManageCont .tableCont tbody tr td .handleBox {
            position: relative;
            height: 16px;
            width: 60px;
        }

        .staffManageCont .tableCont tbody tr td .handleBox .layui-form,
        .staffManageCont .tableCont tbody tr td .handleBox .layui-form-item {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .staffManageCont .tableCont tbody tr td .handleBox .layui-form-item {
            margin-bottom: 0;
            display: flex;
            align-items: center;
        }

        .staffManageCont .tableCont tbody tr td .handleBox .layui-form-label {
            width: 24px;
            float: none;
            display: block;
            padding: 0;
            margin: 0 2px 0 2px;
        }

        .staffManageCont .tableCont tbody tr td .handleBox .layui-input-block {
            height: 100% !important;
            width: 24px;
            min-height: 0;
            margin: 0 2px 0 2px;
        }

        .staffManageCont .tableCont tbody tr td .handleBox .layui-form-switch {
            position: absolute;
            height: 16px;
            line-height: 14px;
            width: 24px;
            min-width: 24px;
            padding: 0 0;
            margin-top: 0;
            border: 1px solid #d2d2d2;
            border-radius: 20px;
        }

        .staffManageCont .tableCont tbody tr td .handleBox .layui-form-onswitch {
            border-color: #4186DC;
            background-color: #4186DC;
        }

        .staffManageCont .tableCont tbody tr td .handleBox .layui-form-switch i {
            top: 1px;
            width: 12px;
            height: 12px;
            left: 2px;
        }

        .staffManageCont .tableCont tbody tr td .handleBox .layui-form-onswitch i {
            left: 100%;
            margin-left: -15px;
            background-color: #fff;
        }

        /*开启未开启功能css结束*/
        /*导入工资弹窗*/
        .importSalaryTanBox-tan .content {
            width: 600px;
            border-radius: 2px;
            background: #fefefe;
        }

        /*内容头部*/
        .importSalaryTanBox-tan .content .head {
            height: 45px;
            border-bottom: 1px solid #ebebf3;
        }

        .importSalaryTanBox-tan .content .head span {
            display: block;
            width: 108px;
            height: 28px;
            line-height: 28px;
            text-align: center;
            margin: 8px;
        }

        .importSalaryTanBox-tan .content .head span.title.layui-layer-title {
            float: left;
            color: #393953;
            font-size: 13px;
            margin-left: 16px;
            font-weight: 600;
            display: block;
            line-height: 28px;
            height: 28px;
            color: #393953;
            font-size: 13px;
            font-weight: 600;
            float: left;
            width: 200px;
            border: none;
            background: #fefefe;
            padding: 0;
            text-align: left;
        }

        .importSalaryTanBox-tan .content .head span.updataBtn {
            float: right;
            border-radius: 2px;
            background: #57B8DB;
            color: #fff;
            font-size: 12px;
            cursor: pointer;
        }

        /*内容体*/
        .importSalaryTanBox-tan .content .body {
            width: 568px;
            height: 470px;
            margin: 0 auto;
            padding-top: 15px;
            overflow-x: hidden;
            overflow-y: scroll;
        }

        .importSalaryTanBox-tan .content .body .cmMain-table2 thead {
            background: #f3f3f7;
            border-bottom: 1px solid #ebebf3;
        }

        .importSalaryTanBox-tan .content .body .cmMain-table2 thead .th-inner {
            color: #828297;
            font-size: 12px;
            font-weight: 600;
        }

        .importSalaryTanBox-tan .content .body .cmMain-table2 tbody tr {
            height: 36px;
            color: #393953;
            font-size: 12px;
            font-weight: 600;
        }

        .importSalaryTanBox-tan .content .body .cmMain-table2 tbody tr:hover {
            background: #f3f3f7;
        }

        .importSalaryTanBox-tan .content .body .cmMain-table2 tbody td {
            border: 0px;
            padding: 0 8px;
        }

        .importSalaryTanBox-tan .content .body .cmMain-table2 tbody i.icon-ico_check {
            color: #54B677;
        }

        .importSalaryTanBox-tan .content .body .cmMain-table2 tbody i.icon-ico_exchange {
            font-weight: normal;
            color: #57B8DB;
        }

        .importSalaryTanBox-tan .content .body .cmMain-table2 tbody .waiting {
            color: #828297;
        }

        /*内容尾部*/
        .importSalaryTanBox-tan .layui-layer-btn {
            padding: 13px 6px;
        }

        .importSalaryTanBox-tan .layui-layer-btn .layui-layer-btn0 {
            width: 68px;
            height: 32px;
            line-height: 32px;
            border-radius: 2px;
            text-align: center;
            border: 1px solid #ebebf3;
            margin: 0;
            padding: 0;
            background-color: #f3f3f7;
            color: #828297;
            font-size: 12px;
        }

        /*导入工资弹窗结束*/
        /*工资单弹窗*/
        .salaryListTanBox-tan .content {
            border-radius: 2px;
            background: #ebebf3;
        }

        /*工资单头部*/
        .salaryListTanBox-tan .head {
            height: 44px;
            padding: 0;
        }

        .salaryListTanBox-tan .head span {
            display: block;
            height: 18px;
            line-height: 18px;
            float: left;
            margin-top: 13px;
            color: #828297;
            font-weight: 600;
            font-size: 12px;
        }

        .salaryListTanBox-tan .head span:nth-child(1) {
            color: #393953;
            font-size: 13px;
        }

        .salaryListTanBox-tan .head span:nth-child(2) {
            margin-left: 10px;
            font-size: 13px;
        }

        .salaryListTanBox-tan .head span:nth-child(3) {
            float: right;
            margin-left: 16px;
        }

        .salaryListTanBox-tan .head span:nth-child(4) {
            float: right;
            margin-left: 16px;
        }

        /*工资单body*/
        .salaryListTanBox-tan .content {
            position: relative;
            height: auto;
            overflow-x: scroll;
            overflow-y: hidden;
        }

        .salaryListTanBox-tan .content .salaryUl {
            height: auto;
            margin-bottom: 0;
            /*display: flex;*/
            /*flex-direction: row;*/
            /*flex-wrap: nowrap;*/
            white-space: nowrap;
            padding: 14px 0 14px 20px;
        }

        .salaryListTanBox-tan .content .salaryUl .item {
            width: 160px;
            min-width: 160px;
            height: auto;
            margin-right: 16px;
            background: #fff;
            border-radius: 2px;
            border: 1px solid #ebebf3;
            display: inline-block;
        }

        .salaryListTanBox-tan .content .salaryUl .item .top {
            padding: 16px;
            background: #f3f3f7;
            border-bottom: 1px solid #ebebf3;
        }

        .salaryListTanBox-tan .content .salaryUl .item .top p {
            margin: 0;
        }

        .salaryListTanBox-tan .content .salaryUl .item .top p:nth-child(1) {
            font-size: 12px;
            color: #828297;
        }

        .salaryListTanBox-tan .content .salaryUl .item .top p:nth-child(1) span:nth-child(2) {
            float: right;
        }

        .salaryListTanBox-tan .content .salaryUl .item .top p:nth-child(2) {
            font-size: 20px;
            color: #393953;
        }

        .salaryListTanBox-tan .content .salaryUl .item .bottom {
            padding: 10px 16px;
        }

        .salaryListTanBox-tan .content .salaryUl .item .bottom p {
            height: 28px;
            font-size: 12px;
            line-height: 28px;
            margin: 0;
        }

        .salaryListTanBox-tan .content .salaryUl .item .bottom p span {
            display: block;
            float: left;
        }

        .salaryListTanBox-tan .content .salaryUl .item .bottom p.red span {
            color: #DD5B4B !important;
        }

        .salaryListTanBox-tan .content .salaryUl .item .bottom p span:nth-child(1) {
            color: #828293;
            min-width: 50px;
        }

        .salaryListTanBox-tan .content .salaryUl .item .bottom p span:nth-child(2) {
            color: #393953;
            margin-left: 10px;
        }

        /*滚动条样式*/
        .salaryListTanBox-tan .content::-webkit-scrollbar-track {
            background-color: rgba(0, 0, 0, 0);
            border-radius: 10px;
            opacity: 0;
        }

        .salaryListTanBox-tan .content::-webkit-scrollbar {
            height: 5px;
            background-color: rgba(245, 245, 245, 0);
        }

        .salaryListTanBox-tan .content::-webkit-scrollbar-thumb {
            border-radius: .1rem;
            background-color: rgba(0, 0, 0, 0);
            transition: all 3s;
        }

        .salaryListTanBox-tan .content.active::-webkit-scrollbar-thumb {
            border-radius: .1rem;
            background-color: rgba(0, 0, 0, 0.3);
        }

        /*工资单尾部*/
        .salaryListTanBox-tan .layui-layer-btn {

        }

        .salaryListTanBox-tan .layui-layer-btn a {
            width: auto;
            height: 32px;
            text-align: center;
            line-height: 32px;
            margin: 0;
            padding: 0 10px;
            border: none;
            background: #f3f3f7;
            color: #828297;
            border-radius: 2px;
            font-weight: 400;
            cursor: pointer;
            text-decoration: none;
            font-size: 12px;
        }

        /*工资单弹窗结束*/
        /*编辑员工弹窗*/
        .layui-layer-editStff-tan {
            border-radius: 2px;
            background: #fefefe;
        }

        /*头部*/
        .layui-layer-editStff-tan .head {
            height: 44px;
            padding: 0 12px;
            border-bottom: 1px solid #ebebf3;
        }

        .layui-layer-editStff-tan .head span {
            display: block;
            float: left;
            height: 42px;
            line-height: 42px;
            font-weight: 600;
        }

        .layui-layer-editStff-tan .head span:nth-child(1) {
            color: #393953;
        }

        .layui-layer-editStff-tan .head span:nth-child(2) {
            color: #828297;
            font-weight: 100;
            margin-left: 6px;
        }

        .layui-layer-editStff-tan .head span:nth-child(3) {
            font-size: 12px;
            color: #DD5B4B;
            float: right;
            cursor: pointer;
        }

        /*body*/
        .layui-layer-editStff-tan .body {
            height: 212px;
            border-bottom: 1px solid #ebebf3;
        }

        .layui-layer-editStff-tan .body .myUl {
            width: 100%;
            height: 100%;
            margin-bottom: 0;
        }

        .layui-layer-editStff-tan .body .myUl .item {
            width: 48%;
            height: 70px;
            float: left;
            margin-left: 2%;
        }

        .layui-layer-editStff-tan .body .myUl .item > div {
            color: #000;
            font-size: 12px;
            box-sizing: border-box;
        }

        .layui-layer-editStff-tan .body .myUl .item > div:nth-child(1) {
            text-align: left;
            margin-top: 12px;
        }

        .layui-layer-editStff-tan .body .myUl .item > div:nth-child(2) {
            width: 156px;
            height: 28px;
            border: 1px solid #ececf4;
            border-radius: 2px;
            margin-top: 6px;
        }

        .layui-layer-editStff-tan .body .myUl .item input {
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            padding: 7px 8px;
        }

        /*编辑员工弹窗结束*/
        /*离职员工操作弹窗*/
        .layui-layer-removeStaff-tan .layui-layer-title {
            color: #DD5B4B;
            font-size: 13px;
            font-weight: 600;
        }

        .layui-layer-removeStaff-tan .layui-layer-content p {
            color: #393953;
            font-size: 12px;
            margin: 0;
            padding: 12px 16px;
            font-weight: 600;
        }

        .layui-layer-removeStaff-tan .layui-layer-btn a {
            width: 44px;
            height: 32px;
            font-size: 12px;
            line-height: 32px;
            margin: 0 0 0 8px;
            padding: 0;
            border: 1px solid #dedede;
            color: #333;
            border-radius: 2px;
            font-weight: 400;
            cursor: pointer;
            text-align: center;
        }

        .layui-layer-removeStaff-tan .layui-layer-btn a.layui-layer-btn0 {
            color: #828297;
            background: #f3f3f7;
        }

        .layui-layer-removeStaff-tan .layui-layer-btn a.layui-layer-btn1 {
            color: #fff;
            background: #dc5a4b;
        }

        /*离职员工操作弹窗结束*/
        /*添加新员工弹窗*/
        .layui-layer-addStaff-tan .layui-layer-title {
            font-size: 13px;
        }

        .layui-layer-addStaff-tan .content-view-newStaff p {
            padding: 20px 36px 0 36px;
            color: #393953;
            font-size: 12px;
        }

        .layui-layer-addStaff-tan .content-view-newStaff div.qrCode {
            width: 160px;
            height: 160px;
            margin: 10px auto;
        }

        /*.layui-layer-addStaff-tan .content-view-newStaff div.qrCode img{*/
        /*width: 100%;*/
        /*height: 100%;*/
        /*}*/
        .layui-layer-addStaff-tan .layui-layer-btn {
            border-top: 1px solid #eee;
        }

        .layui-layer-addStaff-tan .layui-layer-btn a {
            height: 32px;
            line-height: 32px;
            border: 1px solid #eee;
            background: #f3f3f7;
            color: #828297;
            padding: 0 10px;
            font-size: 12px;
        }

        /*添加新员工弹窗结束*/
        /**员工状态样式开始*/
        .outage { /*停用*/
            color: rgba(130, 130, 151, 1);
            font-size: 12px;
            font-family: PingFangSC-Medium;
        }

        .enabled { /*启用*/
            color: rgba(57, 57, 83, 1);
            font-size: 12px;
            font-family: PingFangSC-Medium;
        }

        /**员工状态样式结束*/
        .fixed-table-body tbody {
            background-color: #ffffff;
        }
    </style>
</head>
<body>
<div class="staffManageCont">
    <div class="contHeader">
        <div class="headLeft">员工管理</div>
        <div class="headRight">
            <div class="child newShop" onclick="employee()">创建员工</div>
            <div class="search-box">
                <div class="searchTypeBox">
                    <div class="selectBox" id="searchTypeBox">
                        <div class="select-box-header">
                            <span class="text">姓名</span> <i class="iconfont icon-ico_arrow_down"></i>
                        </div>
                        <div class="optionBox">
                            <ul class="optionUL" id="shopPhoneList">
                                <li value="1">姓名</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <input id="searchStaff" type="text" placeholder='搜索员工'>
                <div class="btn btn-info" style="margin-left: 10px;" onclick="search()">搜索</div>
            </div>
            <div class="child payroll" onclick="updataSalary()">导入<span id="nowMonth">xx</span>月份工资单</div>
            <div class="child  download-btn" onclick="deriveExcel()">下载模板</div>
        </div>
    </div>
    <div class="filter">
        <!--
                <div class="selectBox" id="selectBox2">
                    <div class="select-box-header">
                        <span class="text">杭州西湖旗舰店</span> <i class="iconfont icon-ico_arrow_down"></i>
                    </div>
                    <div class="optionBox">
                        <ul class="optionUL" id="storeUl">
                            <li value="01">杭州西湖旗舰店1</li>
                            <li value="02">杭州西湖旗舰店2</li>
                            <li value="03">杭州西湖旗舰店3</li>
                            <li value="04">杭州西湖旗舰店4</li>
                            <li value="05">杭州西湖旗舰店5</li>
                        </ul>
                    </div>
                </div>
        -->
        <div class="selectBox" id="selectBox3">
            <div class="select-box-header">
                <span class="text">全部性别</span> <i class="iconfont icon-ico_arrow_down"></i>
            </div>
            <div class="optionBox">
                <ul class="optionUL">
                    <li value="3">全部</li>
                    <li value="1">男</li>
                    <li value="2">女</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="tableCont wrap90">
        <table id="cmMain-table" data-toggle="table" class=" table table-border"></table>
    </div>
</div>
<!--导入工资弹窗-->
<div class="content-view importSalaryTanBox" style="display:none">
    <div class="content">
        <div class="head">
            <span class="title layui-layer-title">导入10月份工资单</span>
            <span class="updataBtn" onclick="Improt()">上传工资单Excel</span>
        </div>
        <div class="body">
            <table id="putPayroll" data-toggle="table" class="table table-border"></table>
        </div>
    </div>
</div>
<!--工资单弹窗-->
<div class="content-view salaryListTanBox" style="display:none">
    <div class="content">
        <ul class="salaryUl clearfix">

        </ul>
    </div>
</div>
<!--编辑员工弹窗-->
<div class="content-view content-view-editStff edit-employees" style="display:none">
    <div class="head">
        <span id="edit-name"></span>
        <span class="moveTitle" id="edit-shopName"></span>
        <span id="removeStaff">离职该员工</span>
    </div>
    <div class="body">
        <ul class="myUl">
            <li class="item">
                <div>职位</div>
                <div class="selectBox" id="selectBox4">
                    <div class="select-box-header">
                        <span class="text" id="edit-job"></span> <i class="iconfont icon-ico_arrow_down"></i>
                    </div>
                    <div class="optionBox">
                        <ul class="optionUL" id="jobList">
                        </ul>
                    </div>
                </div>
            </li>
            <li class="item">
                <div>性别</div>
                <div class="selectBox" id="selectBox5">
                    <div class="select-box-header">
                        <span class="text">男</span> <i class="iconfont icon-ico_arrow_down"></i>
                    </div>
                    <div class="optionBox">
                        <ul class="optionUL">
                            <li value="1">男</li>
                            <li value="2">女</li>
                        </ul>
                    </div>
                </div>
            </li>
            <li class="item">
                <div>手机号</div>
                <div>
                    <input type="number" placeholder="请输入手机号" id="edit-phone">
                </div>
            </li>
            <li class="item">
                <div>电子邮箱</div>
                <div>
                    <input type="email" placeholder="请输入邮箱" id="edit-email">
                </div>
            </li>
            <li class="item">
                <div>入职时间</div>
                <div>
                    <div class="settings" style="display:none;">
                        <select name="demo" id="demo">
                            <option value="date">日期</option>
                        </select>
                    </div>
                    <input name="test" id="editTime" data-type="day"
                           class="demo-test-date demo-test-datetime demo-test-time demo-test-credit" placeholder="出生日期"
                           data-type="time"/>
                </div>
            </li>
        </ul>
    </div>
</div>
<!--添加员工弹窗-->
<div class="content-view content-view-editStff add-employees" style="display:none">
    <div class="body">
        <form action="" id="addStaff">
            <ul class="myUl">
                <li class="item">
                    <div>姓名</div>
                    <div>
                        <input type="text" placeholder="请输入姓名" id="emp-name">
                    </div>
                </li>
                <li class="item">
                    <div>职位</div>
                    <div>
                        <input type="text" placeholder="请输入职位" id="addJob">
                    </div>
                </li>
                <li class="item">
                    <div>性别</div>
                    <div class="selectBox" id="job-sex">
                        <div class="select-box-header">
                            <span class="text" id="emp-sex">男</span> <i class="iconfont icon-ico_arrow_down"></i>
                        </div>
                        <div class="optionBox">
                            <ul class="optionUL">
                                <li value="1">男</li>
                                <li value="2">女</li>
                            </ul>
                        </div>
                    </div>
                </li>
                <li class="item">
                    <div>手机号</div>
                    <div>
                        <input type="number" placeholder="请输入手机号" id="emp-phone">
                    </div>
                </li>
                <li class="item">
                    <div>电子邮箱</div>
                    <div>
                        <input type="email" placeholder="请输入邮箱" id="emp-mail">
                    </div>
                </li>
                <li class="item">
                    <div>入职时间</div>
                    <div>
                        <div class="settings" style="display:none;">

                        </div>
                        <input name="test" id="add" data-type="day"
                               class="demo-test-date demo-test-datetime demo-test-time demo-test-credit"
                               placeholder="入职时间"
                               data-type="time"/>
                    </div>
                </li>
                <li class="item">
                    <div>身份证号</div>
                    <div>
                        <input type="text" placeholder="请输入身份证号" id="emp-idcard">
                    </div>
                </li>

            </ul>
        </form>
    </div>
</div>

<!--离职员工操作弹窗-->
<div class="content-view content-view-removeStaff" style="display:none">
    <p>这将禁用该员工的账号及一切操作</p>
</div>
<!--新增员工弹窗-->
<div class="content-view content-view-newStaff" style="display: none;">
    <p>扫描二维码并在手机上新增员工</p>
    <div class="qrCode"></div>
</div>
<!--导入模板-->
<div class="wrapper wrapper-content improt-view" style="display: none">
    <form method="get" class="form-horizontal">
        <div class="form-group">
            <label class="col-sm-2 control-label">选择模版</label>
            <div class="col-sm-10 ">
                <div class="input-group">
                    <span class="input-group-btn">
                        <a href="#"
                           style="display: inline-block;height: 30px;background: #eee;width: 100%;position: relative;">
                            <button type="button" class="btn btn-primary"
                                    style="float: right; height: 30px;width: 80px;line-height:16px;outline: none;">选择文件</button>
                            <input id="file" multiple="multiple" type="file"
                                   style="height: 30px;width: 80px; position: absolute;right:0;outline: none; cursor: pointer;opacity: 0;"
                                   accept=".csv,*.zip,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"/>
                        </a>
                    </span>
                </div>
                <span class="help-block m-b-none validate">请上传模板文件</span>
                <input id="fileName" type="text" placeholder="请选择文件"
                       style="position: absolute;top: 0;height: 30px; width: 73%; outline: none;" readonly/>
            </div>
        </div>
    </form>
</div>

<!--全局js-->
<script src="../resource/js/jquery.min.js"></script>
<script src="../resource/js/bootstrap.js?v=3.3.6"></script>
<!--时间插件引用的css-->
<script src="../resource/js/plugins/bootstarp-table/js/bootstrap-table.js"></script>
<script src="../resource/js/plugins/bootstarp-table/js/bootstrap-table-zh-CN.min.js"></script>
<script src="../resource/js/plugins/layer/layer.js"></script>
<script src="../resource/layui/layui.js"></script>
<!-- 公司内部库 -->
<script src="../resource/js/lib/quakooLib/QuakooBase-1.0.0.js"></script>
<script src="../resource/js/lib/quakooLib/QuakooConfig-1.0.0.js"></script>
<script src="../resource/js/lib/quakooLib/QuakooBasePc-1.0.0.js"></script>
<script src="../resource/js/lib/quakoo/Config.js"></script>
<script src="../resource/js/lib/quakoo/project.js"></script>
<script src="../resource/js/template-native.js"></script>
<script src="../resource/common/common.js"></script>
<script src="../resource/js/yanjing.js"></script>
<script src="../resource/js/mobiscroll.2.13.2.js"></script>
<script type="text/html" id="list">
    <%for (var i = 0; i < list.length; i++){%>
    <li class="item">
        <div class="top">
            <p><span>应发工资</span><span><%=list[i].month%>月</span></p>
            <p><%=list[i].finalPay%></p>
        </div>
        <div class="bottom">
            <p>
                <span>基本工资</span>
                <span><%=list[i].basePay%></span>
            </p>
            <p>
                <span>销售提成</span>
                <span><%=list[i].royalty%></span>
            </p>
            <p>
                <span>奖金</span>
                <span><%=list[i].bonus%></span>
            </p>
            <p>
                <span>罚款</span>
                <span><%=list[i].fine%></span>
            </p>
        </div>
    </li>
    <%}%>
</script>

<script>
    var psid;                                                //企业ID
    var subid;                                               //门店ID
    var staffSex;                                            //下拉框员工性别
    var userType =1;
    var editJob;
    $(function () {
        var preid = window.location.search.replace(/\?subid=/, ""); //前一个页面传参（门店ID）
        psid = quakooUser.getUserInfo().psid;                //企业ID(公司ID)
        subid = preid || quakooDb.getItem("sel_ShopId");       //门店ID
        initPage();                                          //初始化页面
    });

    /**初始化页面*/
    function initPage() {
        getStaffList();
        selectTag($("#selectBox3"), function (ret) {
            staffSex = ret.value;
            getStaffList();
        });
        selectTag($("#searchTypeBox"),function (ret) {
            userType = ret.value;
        });
    }

    /**顾客搜索*/
    function search() {
        var content = $('#searchStaff').val();
        if(quakooUtils.isBlack(content)){
            layer.msg("请输入搜索内容");
            return;
        }
        if(userType == 1){
            getStaffList(content);
        }
    }


    /**接口——获取员工的职位列表*/
    function getJobList() {
        quakooData.ajaxGetData(config.getUrl_user_getAllUserJob(), {sid: subid, userType: 1}, function (ret) {
            if (ret && ret.success) {
                if (quakooUtils.isNotBlack(ret.data)) {
                    var html = "";
                    for (var i = 0; i < ret.data.length; i++) {
                        if (quakooUtils.isNotBlack(ret.data[i])) {
                            html += '<li value="' + ret.data[i] + '">' + ret.data[i] + '</li>';
                        }
                    }
                    document.getElementById("jobList").innerHTML = html;
                    selectTag($("#selectBox4"), function (ret) {
                        editJob = ret.value;
                    });
                }

            }
        })
    }

    /**接口——获取员工列表*/
    function getStaffList(searchContent) {
        var url = config.getUrl_user_getSubCustomerPager();
        var param = {};
        param.subid = subid;                                 //门店ID
        param.userType = 1;                                  //用户类型
        param.token = quakooUser.getUserInfo().token;
        if(searchContent) {                                      //搜索框姓名
            param.name1 = searchContent;
        }
        if (staffSex && (staffSex == 1 || staffSex == 2)) {
            param.sex = staffSex;
        }
        var columns = [
            {field: "name", title: "姓名", align: "left", valign: "middle"},
            {field: "job", title: "职位", align: "left", valign: "middle"},
            {
                field: "sex", title: "性别", align: "left", valign: "middle", formatter: function (value, row, index) {
                    if (value == 1) {
                        return "<span>男</span>"
                    } else if (value == 2) {
                        return "<span>女</span>"
                    } else if (value == 0) {
                        return "<span>-</span>"
                    }
                }
            },
            {field: "phone", title: "手机号", align: "left", valign: "middle"},
            {field: "mail", title: "电子邮箱", align: "left", valign: "middle"},
            {
                field: "workingDate",
                title: "入职时间",
                align: "left",
                valign: "middle",
                formatter: function (value, row, index) {
                    return "<span>" + quakooUtils.formatTimeToDateDianLY(row.workingDate) + "</span>"
                }
            },
            {field: "idCard", title: "身份证号", align: "left", valign: "middle"},
            {
                field: "status", title: "状态", align: "left", valign: "middle", formatter: function (value, row, index) {
                    if (value == 0) {
                        return '<div class="switch active" attr-id="' + row.id + '" attr-status="1"><span class="switch-btn"><i></i></span> <span class="enabled">启用</span></div>'
                    } else if (value == 1) {
                        return '<div class="switch" attr-id="' + row.id + '" attr-status="0"><span class="switch-btn"><i></i></span> <span class="outage">停用</span></div>';
                    }
                }
            },
            {
                field: "", title: "操作", align: "left", valign: "middle", formatter: function (value, row, index) {
                    var html;
                    html = "<div class='btn-status btn-edit' onclick='showStffEdit(" + JSON.stringify(row) + ")'>编辑</div>" + "<div class='btn-status btn-salary' onclick='showSalaryList(" + JSON.stringify(row) + ")'>工资单</div>";
                    return html;
                }
            }
        ];
        ajaxTableData('#cmMain-table', url, param, columns);
    }

    /**table模板*/
    function ajaxTableData(domId, url, param, columns) {
        $(domId).bootstrapTable('destroy');
        $(domId).bootstrapTable({
            url: url,
            method: 'get',
            classes: "table",
            pagination: true,                     //是否显示分页
            sidePagination: "server",             //分页方式：client客户端分页，server服务端分页（*）
            pageNumber: 1,                        //初始化加载第一页，默认第一页
            pageSize: 8,
            pageList: [5, 10, 15, 20],
            sortable: false,
            sortOrder: "asc",
            showColumns: true,
            strictSearch: true,
            locale: "zh-CN",
            paginationHAlign: "center",
            clickToSelect: true,
            columns: columns,
            queryParams: function (params) {
                for (var i in param) {
                    params[i] = param[i]
                }
                params.page = this.pageNumber;
                params.size = this.pageSize;
                return params;
            },
            success: function () {

            },
            onLoadSuccess: function (data) {
                /**
                 * 开关切换
                 * */
                $(".switch-btn").click(function () {
                    var $dom = $(this).parent(".switch");
                    var id = $dom.attr("attr-id");
                    var status = $dom.attr("attr-status");
                    quakooData.ajaxGetData(config.getUrl_user_updateStatus(), {id: id, status: status}, function (ret) {
                        if (ret && ret.success) {
                            $dom.toggleClass('active');
                            if (status == 1) {
                                $dom.attr("attr-status", 0);
                                $dom.find(".enabled").removeClass("enabled").addClass("outage").html("停用");
                                layer.msg("员工已停用", {icon: 1})
                            } else if (status == 0) {
                                $dom.attr("attr-status", 1);
                                $dom.find(".outage").removeClass("outage").addClass("enabled").html("启用");
                                layer.msg("员工已启用", {icon: 1})
                            }
                        }
                    });
                });
            }

        });
    }

    /**接口——添加员工*/
    function addEmployees(index, sex) {
        var name = $("#emp-name").val();
        var job = $("#addJob").val();
        var phone = $("#emp-phone").val();
        var sex = sex || 1;
        var mail = $("#emp-mail").val();
        var idCard = $("#emp-idcard").val();
        var jobDay = $("#add").val().replace(/\./g, ',');
        jobDay = new Date(jobDay).getTime();
        if (quakooUtils.isBlack(name)) {
            layer.msg("请输入员工姓名", {icon: 4});
            return
        }
        if (quakooUtils.isBlack(phone)) {
            layer.msg("请输入手机号", {icon: 4});
            return
        }
        if (!quakooUtils.isMobileNum(phone)) {
            layer.msg("请输入正确手机号", {icon: 4});
            return
        }
        if (quakooUtils.isBlack(mail)) {
            layer.msg("请输入邮箱", {icon: 4});
            return
        }
        if (!quakooUtils.isEmail(mail)) {
            layer.msg("请输入正确邮箱", {icon: 4});
            return
        }
        if (quakooUtils.isBlack(idCard)) {
            layer.msg("请输入身份证号", {icon: 4});
            return
        }
        if (!quakooUtils.isIDcard(idCard)) {
            layer.msg("请输入正确的身份证号", {icon: 4});
            return
        }
        if (quakooUtils.isBlack(jobDay)) {
            layer.msg("请选择员工入职时间", {icon: 4});
            return
        }
        var param = {};
        param.name = name;                  //员工姓名
        param.job = job;                    //职位
        param.phone = phone;               //电话
        param.sex = sex;                   //性别
        param.mail = mail;                 //邮箱
        param.psid = psid;                 //公司ID
        param.sid = subid;                 //店铺ID
        param.idCard = idCard;             //身份证
        param.workingDate = jobDay;             //入职时间
        param.userType = 1;                //0表示顾客，1表示员工
        quakooData.ajaxGetData(config.getUrl_user_add(), param, function (ret) {
            if (ret && ret.success) {
                layer.msg("成功创建员工" + name, {icon: 1});
                getStaffList(subid);
                setTimeout(function () {
                    layer.close(index);
                }, 200);
            } else {
                layer.alert(ret.data, {icon: 2})
            }
        });
    }

    /**接口——编辑员工*/
    function editStaff(index, id, name, editJob, editSex) {
        var job = editJob;
        var sex = editSex;
        var phone = $("#edit-phone").val();
        var mail = $("#edit-email").val();
        var workingDate = $("#editTime").val().replace(/\./g, ',');
        workingDate = new Date(workingDate).getTime();
        if (quakooUtils.isNotBlack(id)) {
            if (quakooUtils.isNotBlack(phone)) {
                if (quakooUtils.isMobileNum(phone)) {
                    if (quakooUtils.isNotBlack(mail)) {
                        if (quakooUtils.isEmail(mail)) {
                            quakooData.ajaxGetData(config.getUrl_user_updateUser(), {
                                id: id,
                                name: name,
                                job: job,
                                sex: sex,
                                phone: phone,
                                mail: mail,
                                workingDate: workingDate
                            }, function (ret) {
                                console.log("编辑：", ret);
                                if (ret && ret.success) {
                                    layer.msg("编辑员工信息成功", {icon: 1});
                                    getStaffList(subid);
                                    setTimeout(function () {
                                        layer.close(index);
                                    }, 200);
                                }
                            })
                        } else {
                            layer.msg("请输入正确的邮箱！", {icon: 4})
                        }
                    } else {
                        layer.msg("请输入邮箱！", {icon: 4})
                    }
                } else {
                    layer.msg("请输入正确的手机号", {icon: 4});
                }
            } else {
                layer.msg("请输入手机号！", {icon: 4})
            }
        }

    }

    /**接口——查询某公司工资单导入记录*/
    function getPayrollList() {
        /*
                quakooData.ajaxGetData(config.getUrl_salaryrecord_getAllList(),{psid:psid},function (ret) {
                    console.log("工资单：",ret);
                });
        */
        $("#putPayroll").bootstrapTable('destroy');
        $("#putPayroll").bootstrapTable({
            url: config.getUrl_salaryrecord_getAllList(),
            method: 'get',
            classes: "table",
            pagination: true,                     //是否显示分页
            sidePagination: "server",             //分页方式：client客户端分页，server服务端分页（*）
            pageNumber: 1,                        //初始化加载第一页，默认第一页
            pageSize: 10,
            pageList: [5, 10, 15, 20],
            sortable: false,
            sortOrder: "asc",
            showColumns: true,
            strictSearch: true,
            locale: "zh-CN",
            paginationHAlign: "center",
            clickToSelect: true,
            columns: [
                {field: "name", title: "门店名称", align: "left", valign: "middle"},
                {field: "allMoney", title: "应发工资", align: "left", valign: "middle"},
                {field: "allNumber", title: "实发工资人数", align: "left", valign: "middle"},
                {
                    field: "status", title: "状态", align: "left", valign: "middle",
                    formatter: function (value, row, index) {//循环自定义内容
                        //正在上传
                        var icon = '<i class="icon iconfont icon-ico_check"></i>'
                        var txt = '<span class="sunccess">上传成功</span>'
                        //上传中
                        // var icon = '<i class="icon iconfont icon-ico_exchange"></i>'
                        // var txt = '<span class="sunccess">上传中</span>'
                        //等待中
                        // var txt = '<span class="waiting">等待中</span>'
                        // var icon = ''
                        return icon + txt
                    }
                }
            ],
            queryParams: function (params) {
                params.psid = psid;
                params.page = this.pageNumber;
                params.size = this.pageSize;
                params.token = quakooUser.getUserInfo().token;
                return params;
            },
            success: function () {
                alert(2)
            },
            onLoadSuccess: function (data) {

            }
        });

    }


    //是否为管理员
    var admin = true;
    var adminHandle = '';
    if (admin) {
        adminHandle = '<div class="layui-input-block">' + '<input id="shopIsOpen" type="checkbox" name="open" lay-skin="switch" lay-filter="switchTest">' + '</div>'
    }
    //员工开启关闭功能
    layui.use(['form', 'layedit', 'laydate'], function () {
        var form = layui.form;
        form.on('switch(switchTest)', function (data) {
            var isOpenTxt = $(this).parent().siblings('.layui-form-label');
            isOpenTxt.text(this.checked == true ? '启用' : '停用')
        });
    });


    //上传工资单弹窗
    function updataSalary() {
        getPayrollList();
        layer.open({
            type: 1,
            shade: 0.01,
            title: null,
            skin: 'importSalaryTanBox-tan', //样式类名
            anim: 0,
            area: ['606px', 'auto'],
            closeBtn: 0, //不显示关闭按钮
            resize: false,
            shadeClose: true, //开启遮罩关闭
            content: $('.importSalaryTanBox'),
            btn: ['关闭窗口'],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                return false;
            },
            success: function (index) {
                $('.importSalaryTanBox-tan .layui-layer-content').height(515);
            }
        });
    }

    //工资单弹窗
    function showSalaryList(obj) {
        quakooData.ajaxGetData(config.getUrl_salary_loadSalaryByUser(), {uid: obj.id}, function (ret) {
            if (ret && ret.success && ret.data) {
                if (ret.data.length > 0) {
                    for (let i = 0; i < ret.data.length; i++) {
                        ret.data[i].finalPay = (parseFloat(ret.data[i].finalPay) / 100).toFixed(2);
                        ret.data[i].basePay = (parseFloat(ret.data[i].basePay) / 100).toFixed(2);
                        ret.data[i].royalty = (parseFloat(ret.data[i].royalty) / 100).toFixed(2);
                        ret.data[i].bonus = (parseFloat(ret.data[i].bonus) / 100).toFixed(2);
                        ret.data[i].fine = (parseFloat(ret.data[i].fine) / 100).toFixed(2);

                    }
                    $('.salaryListTanBox .salaryUl').html(template('list', {list: ret.data}))
                    layer.open({
                        type: 1,
                        shade: 0.01,
                        title: '<div class="head">' + '<span>工资单</span>' + '<span>' + obj.name + '</span>' + '<span>年休假期:&nbsp;<em>10</em></span>' + '<span>可用假期:&nbsp;<em>3</em></span>' + '</div>',
                        skin: 'salaryListTanBox-tan', //样式类名
                        anim: 0,
                        area: ['600px', 'auto'],
                        closeBtn: 0, //不显示关闭按钮
                        resize: false,
                        shadeClose: true, //开启遮罩关闭
                        content: $('.salaryListTanBox'),
                        btn: ['关闭窗口'],
                        yes: function (index) {
                            layer.close(index);
                        },
                        btn2: function (index) {
                            layer.close(index);
                        },
                        success: function (index) {
                            scrollXfn()//横向滑动
                        }
                    });
                } else {
                    layer.msg('暂无数据');
                }
            }
        })
    }

    /**弹窗——创建员工*/
    function employee() {
        var sex;
        layer.open({
            type: 1,
            title: '创建员工临时页面（设计图扫码移动端添加）',
            content: $('.content-view-editStff.add-employees'),
            area: ['360px', 'auto'],
            shade: 0.01,
            shadeClose: true, //开启遮罩关闭
            skin: 'layui-layer-editStff-tan content-view-submit', //样式类名
            closeBtn: 0, //不显示关闭按钮
            resize: false,
            btn: ['取消', '创建'],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                /**调用添加员工接口*/
                addEmployees(index, sex);
                return false
            },
            success: function (layero, index) {
                _StffEdit = index;
                selectTag($("#job-sex"), function (ret) { //选择性别
                    sex = ret.value;
                });
            }
        });
    }

    /**弹窗——编辑员工*/
    function showStffEdit(data) {
        selectTag($("#selectBox5"), function (ret) {
            editSex = ret.value;
        });
        var useId;
        var name;
        var status;
        var editSex;
        var editPhone;
        var editMail;
        var workTime;
        layer.open({
            type: 1,
            shade: 0.01,
            title: null,
            skin: 'layui-layer-editStff-tan content-view-submit', //样式类名
            anim: 0,
            move: $('.content-view-editStff .moveTitle'),
            area: ['360px', 'auto'],
            closeBtn: 0,      //不显示关闭按钮
            resize: false,
            shadeClose: true, //开启遮罩关闭
            content: $('.content-view-editStff.edit-employees'),
            btn: ['取消', '保存'],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                editStaff(index, useId, name, editJob, editSex);
                return false;
            },
            success: function (layero, index) {
                _StffEdit = index;
                /**编辑数据回显*/
                console.log("是的发放大法师打：；", data);
                useId = data.id;
                name = data.name;
                editJob = data.job;
                editPhone = data.phone;
                editMail = data.mail;
                workTime = data.workingDate;
                $("#edit-name").html(data.name);
                $("#edit-shopName").html(data.subName);
                $("#edit-job").html(data.job);
                if (data.sex == 1) {
                    $("#selectBox5 .text")[0].innerHTML = "男";
                    editSex = 1;
                } else if (data.sex == 2) {
                    $("#selectBox5 .text")[0].innerHTML = "女";
                    editSex = 2;
                }
                $("#edit-phone").val(data.phone);
                $("#edit-email").val(data.mail);
                $("#editTime").val(quakooUtils.formatTimeToDateDianLY(data.workingDate));
                getJobList(psid);
                $("#removeStaff")[0].onclick = function f() {
                    if (data.status == 0) {
                        status = 1;
                    } else if (data.status == 1) {
                        status = 0;
                    }
                    removeStaff(useId, status);
                }
            }
        });
    }

    /**离职该员工点击弹窗*/
    function removeStaff(id, status) {
        layer.open({
            type: 1,
            shade: 0.01,
            title: '确定离职该员工？',
            skin: 'layui-layer-removeStaff-tan', //样式类名
            anim: 0,
            area: ['240px', '130px'],
            closeBtn: 0, //不显示关闭按钮
            resize: false,
            shadeClose: false, //开启遮罩关闭
            content: $('.content-view-removeStaff'),
            btn: ['取消', '确定'],
            yes: function (index) {
                // layer.close(_StffEdit);
                layer.close(index);
            },
            btn2: function (index) {
                disableStaff(_StffEdit, index, id, status);
            },
            success: function (index) {

            }
        });
    }

    function disableStaff(_StffEdit, index, id, status) {
        quakooData.ajaxGetData(config.getUrl_user_updateStatus(), {id: id, status: status}, function (ret) {
            console.log(ret);
            if (ret && ret.success) {
                if (ret.data == "true") {
                    getStaffList(subid);
                }
            }
        });


        layer.close(_StffEdit);
        layer.close(index);
    }

    /**横向滚动方法*/
    function scrollXfn() {
        var z_type = true;
        $('.salaryListTanBox .content').hover(function () {
            // $(document).bind('mousewheel', function (event, delta) {
            //   return false;
            // });
            $('body').css('overflow', 'hidden')
            $(this).addClass('active');
            z_type = false;
        }, function () {
            // $(document).unbind('mousewheel');
            $('body').css('overflow', 'auto')
            $(this).removeClass('active');
            z_type = true;
        })
        document.addEventListener('DOMMouseScroll', handler, false);
        document.addEventListener('mousewheel', handler, false);

        function handler(event) {
            if (z_type) return;
            var detail = event.wheelDelta || event.detail;
            var moveForwardStep = 1;
            var moveBackStep = -1;
            var step = 0;
            if (detail < 0) {
                step = moveForwardStep * 100;
            } else {
                step = moveBackStep * 100;
            }
            $('.salaryListTanBox .content')[0].scrollLeft += step;
        }
    }

    /**添加员工弹窗*/
    function addStaff() {
        layer.open({
            type: 1,
            shade: 0.01,
            title: '新增员工',
            skin: 'layui-layer-addStaff-tan', //样式类名
            anim: 0,
            area: ['240px', '320px'],
            closeBtn: 0, //不显示关闭按钮
            resize: false,
            shadeClose: true, //开启遮罩关闭
            content: $('.content-view-newStaff'),
            btn: ['关闭窗口'],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                return false;
            },
            success: function (layero, index) {

            }
        });
    }

    /**时间插件JS开始*/
    $(function () {
        var curr = new Date().getFullYear();
        var opt = {};
        opt.date = {preset: 'date'};
        opt.datetime = {preset: 'datetime'};
        opt.time = {preset: 'time'};

        opt.default = {
            theme: 'mbsc-android-holo', //皮肤样式
            display: 'bubble', //显示方式
            mode: 'scroller', //日期选择模式
            dateFormat: 'yyyy.mm.dd',
            lang: 'zh',
            showNow: true,
            nowText: "今天",
            typeNum: 'day',//day：获取到日，time：获取到时，branch：获取到分；默认是获取到分
        };
        $('.settings').bind('change', function () {
            var demo = 'datetime';
            if (!demo.match(/select/i)) {
                $('.demo-test-' + demo).val('');
            }
            $('.demo-test-' + demo).scroller('destroy').scroller($.extend(opt['datetime'], opt['default']));
            $('.demo').hide();
            $('.demo-' + demo).show();
        });
        $('#demo').trigger('change');
        return curr;
    });

    //模板导入
    $('#file').change(function () {
        $('#fileName').val($('#file').val());
    });

    //导入工资单
    function Improt() {
        var index = layer.open({
            type: 1,
            shade: 0,
            id: 'areaAdd1',     //设定一个id，防止重复弹出
            title: '导入工资单',
            area: ['500px', '400px'],
            content: $('.improt-view'),
            btn: ['确定', '取消'],
            yes: function (index) {
                layer.load(0, {shade: false}); //0代表加载的风格，支持0-2
                // var fileObj = document.getElementById("file").files[0]; // js 获取文件对象
                var fileObj = document.getElementById("file").files; // js 获取文件对象
                console.log(fileObj)
                if (typeof (fileObj) == "undefined" || fileObj.size <= 0) {
                    return;
                }
                var result = {succ: '导入成功！', fail: '导入失败！'};
                var formFile = new FormData();
                formFile.append("file", fileObj); //加入文件对象
                var token = quakooUser.getUserInfo().token;
                // alert(token)
                $.ajax({
                    url: config.serverUrl + "/salary/importUserSalary?token=" + encodeURIComponent(token),
                    type: "Post",
                    dataType: "json",
                    cache: false,//上传文件无需缓存
                    processData: false,//用于对data参数进行序列化处理 这里必须false
                    contentType: false, //必须
                    data: formFile,
                    success: function (res) {
                        var msg = (res.msg == undefined ? '' : res.msg);
                        if (res.success) {
                            layer.msg(result.succ, {icon: 1, shade: 0.01});
                            $('.layui-layer-loading').hide();
                            handleTable("", "", config.serverUrl + "/user/getSubCustomerPager?userType=1");
                        } else {
                            layer.confirm(result.fail + msg, {
                                btn: ['知道了'] //按钮
                            });
                            $('.layui-layer-loading').hide();
                        }
                    },
                    error: function (err) {
                        $('.layui-layer-loading').hide();
                    },

                });

            },

            shadeClose: false, //开启遮罩关闭
            success: function (layero, index) {

            }
        });
    }

    //下载模板
    function deriveExcel() {
        document.location.href = config.serverUrl + '/salary/downloadTemplatesExcel?token=' + encodeURIComponent(quakooUser.getUserInfo().token);
    }


</script>
</body>
</html>